[discordeno-monorepo](../README.md) / [Modules](../modules.md) / [@discordeno/gateway](../modules/discordeno_gateway.md) / CreateShard

# Interface: CreateShard

[@discordeno/gateway](../modules/discordeno_gateway.md).CreateShard

## Table of contents

### Properties

- [bucket](discordeno_gateway.CreateShard.md#bucket)
- [calculateSafeRequests](discordeno_gateway.CreateShard.md#calculatesaferequests)
- [close](discordeno_gateway.CreateShard.md#close)
- [connect](discordeno_gateway.CreateShard.md#connect)
- [events](discordeno_gateway.CreateShard.md#events)
- [gatewayConfig](discordeno_gateway.CreateShard.md#gatewayconfig)
- [handleClose](discordeno_gateway.CreateShard.md#handleclose)
- [handleMessage](discordeno_gateway.CreateShard.md#handlemessage)
- [heart](discordeno_gateway.CreateShard.md#heart)
- [id](discordeno_gateway.CreateShard.md#id)
- [identify](discordeno_gateway.CreateShard.md#identify)
- [isOpen](discordeno_gateway.CreateShard.md#isopen)
- [makePresence](discordeno_gateway.CreateShard.md#makepresence)
- [maxRequestsPerRateLimitTick](discordeno_gateway.CreateShard.md#maxrequestsperratelimittick)
- [offlineSendQueue](discordeno_gateway.CreateShard.md#offlinesendqueue)
- [previousSequenceNumber](discordeno_gateway.CreateShard.md#previoussequencenumber)
- [rateLimitResetInterval](discordeno_gateway.CreateShard.md#ratelimitresetinterval)
- [requestIdentify](discordeno_gateway.CreateShard.md#requestidentify)
- [resolves](discordeno_gateway.CreateShard.md#resolves)
- [resume](discordeno_gateway.CreateShard.md#resume)
- [send](discordeno_gateway.CreateShard.md#send)
- [shutdown](discordeno_gateway.CreateShard.md#shutdown)
- [startHeartbeating](discordeno_gateway.CreateShard.md#startheartbeating)
- [state](discordeno_gateway.CreateShard.md#state)
- [stopHeartbeating](discordeno_gateway.CreateShard.md#stopheartbeating)
- [totalShards](discordeno_gateway.CreateShard.md#totalshards)

## Properties

### bucket

• `Optional` **bucket**: [`LeakyBucket`](discordeno_gateway.LeakyBucket.md)

Bucket for handling shard request rate limits.

#### Defined in

[packages/gateway/src/shard/createShard.ts:348](https://github.com/deepsarda/discordeno/blob/c6dc30bb/packages/gateway/src/shard/createShard.ts#L348)

---

### calculateSafeRequests

• `Optional` **calculateSafeRequests**: (`shard`: { `bucket`: [`LeakyBucket`](discordeno_gateway.LeakyBucket.md) ; `calculateSafeRequests`: () => `number` ; `close`: (`code`: `number`, `reason`: `string`) => `void` ; `connect`: () => `Promise`<`void`\> ; `events`: [`ShardEvents`](discordeno_gateway.ShardEvents.md) ; `gatewayConfig`: [`ShardGatewayConfig`](discordeno_gateway.ShardGatewayConfig.md) ; `handleClose`: (`close`: `CloseEvent`) => `Promise`<`void`\> ; `handleMessage`: (`message`: `MessageEvent`) => `Promise`<`void`\> ; `heart`: [`ShardHeart`](discordeno_gateway.ShardHeart.md) ; `id`: `number` = options.id; `identify`: () => `Promise`<`void`\> ; `isOpen`: () => `boolean` ; `makePresence`: `undefined` \| (`shardId`: `number`) => [`BotStatusUpdate`](discordeno_gateway.BotStatusUpdate.md) \| `Promise`<[`BotStatusUpdate`](discordeno_gateway.BotStatusUpdate.md)\> = options.makePresence; `maxRequestsPerRateLimitTick`: `number` = MAX_GATEWAY_REQUESTS_PER_INTERVAL; `offlineSendQueue`: (`_?`: `unknown`) => `void`[] ; `previousSequenceNumber`: `null` \| `number` ; `rateLimitResetInterval`: `number` = GATEWAY_RATE_LIMIT_RESET_INTERVAL; `requestIdentify`: () => `Promise`<`void`\> ; `resolves`: `Map`<`"READY"` \| `"RESUMED"` \| `"INVALID_SESSION"`, (`payload`: [`DiscordGatewayPayload`](discordeno_gateway.DiscordGatewayPayload.md)) => `void`\> ; `resume`: () => `Promise`<`void`\> ; `resumeGatewayUrl`: `string` = ''; `send`: (`message`: [`ShardSocketRequest`](discordeno_gateway.ShardSocketRequest.md), `highPriority?`: `boolean`) => `Promise`<`void`\> ; `sessionId`: `undefined` \| `string` ; `shutdown`: () => `Promise`<`void`\> ; `socket`: `undefined` \| `WebSocket` ; `startHeartbeating`: (`interval`: `number`) => `void` ; `state`: [`ShardState`](../enums/discordeno_gateway.ShardState.md) = ShardState.Offline; `stopHeartbeating`: () => `void` ; `totalShards`: `number` = options.totalShards }) => `number`

#### Type declaration

▸ (`shard`): `number`

Calculate the amount of requests which can safely be made per rate limit interval,
before the gateway gets disconnected due to an exceeded rate limit.

##### Parameters

| Name                                | Type                                                                                                                                                                         | Default value                       | Description                                                                                                                                                        |
| :---------------------------------- | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :---------------------------------- | :----------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `shard`                             | `Object`                                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.bucket`                      | [`LeakyBucket`](discordeno_gateway.LeakyBucket.md)                                                                                                                           | `undefined`                         | Internal shard bucket. Only access this if you know what you are doing. Bucket for handling shard request rate limits.                                             |
| `shard.calculateSafeRequests`       | () => `number`                                                                                                                                                               | `undefined`                         | -                                                                                                                                                                  |
| `shard.close`                       | (`code`: `number`, `reason`: `string`) => `void`                                                                                                                             | `undefined`                         | -                                                                                                                                                                  |
| `shard.connect`                     | () => `Promise`<`void`\>                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.events`                      | [`ShardEvents`](discordeno_gateway.ShardEvents.md)                                                                                                                           | `undefined`                         | The shard related event handlers.                                                                                                                                  |
| `shard.gatewayConfig`               | [`ShardGatewayConfig`](discordeno_gateway.ShardGatewayConfig.md)                                                                                                             | `undefined`                         | The gateway configuration which is used to connect to Discord.                                                                                                     |
| `shard.handleClose`                 | (`close`: `CloseEvent`) => `Promise`<`void`\>                                                                                                                                | `undefined`                         | -                                                                                                                                                                  |
| `shard.handleMessage`               | (`message`: `MessageEvent`) => `Promise`<`void`\>                                                                                                                            | `undefined`                         | -                                                                                                                                                                  |
| `shard.heart`                       | [`ShardHeart`](discordeno_gateway.ShardHeart.md)                                                                                                                             | `undefined`                         | This contains all the heartbeat information                                                                                                                        |
| `shard.id`                          | `number`                                                                                                                                                                     | `options.id`                        | Id of the shard.                                                                                                                                                   |
| `shard.identify`                    | () => `Promise`<`void`\>                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.isOpen`                      | () => `boolean`                                                                                                                                                              | `undefined`                         | -                                                                                                                                                                  |
| `shard.makePresence`                | `undefined` \| (`shardId`: `number`) => [`BotStatusUpdate`](discordeno_gateway.BotStatusUpdate.md) \| `Promise`<[`BotStatusUpdate`](discordeno_gateway.BotStatusUpdate.md)\> | `options.makePresence`              | Function which can be overwritten in order to get the shards presence.                                                                                             |
| `shard.maxRequestsPerRateLimitTick` | `number`                                                                                                                                                                     | `MAX_GATEWAY_REQUESTS_PER_INTERVAL` | The maximum of requests which can be send to discord per rate limit tick. Typically this value should not be changed.                                              |
| `shard.offlineSendQueue`            | (`_?`: `unknown`) => `void`[]                                                                                                                                                | `undefined`                         | Internal state. Only use this if you know what you are doing. Cache for pending gateway requests which should have been send while the gateway went offline.       |
| `shard.previousSequenceNumber`      | `null` \| `number`                                                                                                                                                           | `undefined`                         | The previous payload sequence number.                                                                                                                              |
| `shard.rateLimitResetInterval`      | `number`                                                                                                                                                                     | `GATEWAY_RATE_LIMIT_RESET_INTERVAL` | In which interval (in milliseconds) the gateway resets it's rate limit.                                                                                            |
| `shard.requestIdentify`             | () => `Promise`<`void`\>                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.resolves`                    | `Map`<`"READY"` \| `"RESUMED"` \| `"INVALID_SESSION"`, (`payload`: [`DiscordGatewayPayload`](discordeno_gateway.DiscordGatewayPayload.md)) => `void`\>                       | `undefined`                         | Internal shard map. Only use this map if you know what you are doing. This is used to resolve internal waiting states. Mapped by SelectedEvents => ResolveFunction |
| `shard.resume`                      | () => `Promise`<`void`\>                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.resumeGatewayUrl`            | `string`                                                                                                                                                                     | `''`                                | -                                                                                                                                                                  |
| `shard.send`                        | (`message`: [`ShardSocketRequest`](discordeno_gateway.ShardSocketRequest.md), `highPriority?`: `boolean`) => `Promise`<`void`\>                                              | `undefined`                         | -                                                                                                                                                                  |
| `shard.sessionId`                   | `undefined` \| `string`                                                                                                                                                      | `undefined`                         | Current session id of the shard if present.                                                                                                                        |
| `shard.shutdown`                    | () => `Promise`<`void`\>                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.socket`                      | `undefined` \| `WebSocket`                                                                                                                                                   | `undefined`                         | This contains the WebSocket connection to Discord, if currently connected.                                                                                         |
| `shard.startHeartbeating`           | (`interval`: `number`) => `void`                                                                                                                                             | `undefined`                         | -                                                                                                                                                                  |
| `shard.state`                       | [`ShardState`](../enums/discordeno_gateway.ShardState.md)                                                                                                                    | `ShardState.Offline`                | Current internal state of the shard.                                                                                                                               |
| `shard.stopHeartbeating`            | () => `void`                                                                                                                                                                 | `undefined`                         | -                                                                                                                                                                  |
| `shard.totalShards`                 | `number`                                                                                                                                                                     | `options.totalShards`               | The total amount of shards which are used to communicate with Discord.                                                                                             |

##### Returns

`number`

#### Defined in

[packages/gateway/src/shard/createShard.ts:266](https://github.com/deepsarda/discordeno/blob/c6dc30bb/packages/gateway/src/shard/createShard.ts#L266)

---

### close

• `Optional` **close**: (`shard`: { `bucket`: [`LeakyBucket`](discordeno_gateway.LeakyBucket.md) ; `calculateSafeRequests`: () => `number` ; `close`: (`code`: `number`, `reason`: `string`) => `void` ; `connect`: () => `Promise`<`void`\> ; `events`: [`ShardEvents`](discordeno_gateway.ShardEvents.md) ; `gatewayConfig`: [`ShardGatewayConfig`](discordeno_gateway.ShardGatewayConfig.md) ; `handleClose`: (`close`: `CloseEvent`) => `Promise`<`void`\> ; `handleMessage`: (`message`: `MessageEvent`) => `Promise`<`void`\> ; `heart`: [`ShardHeart`](discordeno_gateway.ShardHeart.md) ; `id`: `number` = options.id; `identify`: () => `Promise`<`void`\> ; `isOpen`: () => `boolean` ; `makePresence`: `undefined` \| (`shardId`: `number`) => [`BotStatusUpdate`](discordeno_gateway.BotStatusUpdate.md) \| `Promise`<[`BotStatusUpdate`](discordeno_gateway.BotStatusUpdate.md)\> = options.makePresence; `maxRequestsPerRateLimitTick`: `number` = MAX_GATEWAY_REQUESTS_PER_INTERVAL; `offlineSendQueue`: (`_?`: `unknown`) => `void`[] ; `previousSequenceNumber`: `null` \| `number` ; `rateLimitResetInterval`: `number` = GATEWAY_RATE_LIMIT_RESET_INTERVAL; `requestIdentify`: () => `Promise`<`void`\> ; `resolves`: `Map`<`"READY"` \| `"RESUMED"` \| `"INVALID_SESSION"`, (`payload`: [`DiscordGatewayPayload`](discordeno_gateway.DiscordGatewayPayload.md)) => `void`\> ; `resume`: () => `Promise`<`void`\> ; `resumeGatewayUrl`: `string` = ''; `send`: (`message`: [`ShardSocketRequest`](discordeno_gateway.ShardSocketRequest.md), `highPriority?`: `boolean`) => `Promise`<`void`\> ; `sessionId`: `undefined` \| `string` ; `shutdown`: () => `Promise`<`void`\> ; `socket`: `undefined` \| `WebSocket` ; `startHeartbeating`: (`interval`: `number`) => `void` ; `state`: [`ShardState`](../enums/discordeno_gateway.ShardState.md) = ShardState.Offline; `stopHeartbeating`: () => `void` ; `totalShards`: `number` = options.totalShards }, `code`: `number`, `reason`: `string`) => `void`

#### Type declaration

▸ (`shard`, `code`, `reason`): `void`

Close the socket connection to discord if present.

##### Parameters

| Name                                | Type                                                                                                                                                                         | Default value                       | Description                                                                                                                                                        |
| :---------------------------------- | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :---------------------------------- | :----------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `shard`                             | `Object`                                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.bucket`                      | [`LeakyBucket`](discordeno_gateway.LeakyBucket.md)                                                                                                                           | `undefined`                         | Internal shard bucket. Only access this if you know what you are doing. Bucket for handling shard request rate limits.                                             |
| `shard.calculateSafeRequests`       | () => `number`                                                                                                                                                               | `undefined`                         | -                                                                                                                                                                  |
| `shard.close`                       | (`code`: `number`, `reason`: `string`) => `void`                                                                                                                             | `undefined`                         | -                                                                                                                                                                  |
| `shard.connect`                     | () => `Promise`<`void`\>                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.events`                      | [`ShardEvents`](discordeno_gateway.ShardEvents.md)                                                                                                                           | `undefined`                         | The shard related event handlers.                                                                                                                                  |
| `shard.gatewayConfig`               | [`ShardGatewayConfig`](discordeno_gateway.ShardGatewayConfig.md)                                                                                                             | `undefined`                         | The gateway configuration which is used to connect to Discord.                                                                                                     |
| `shard.handleClose`                 | (`close`: `CloseEvent`) => `Promise`<`void`\>                                                                                                                                | `undefined`                         | -                                                                                                                                                                  |
| `shard.handleMessage`               | (`message`: `MessageEvent`) => `Promise`<`void`\>                                                                                                                            | `undefined`                         | -                                                                                                                                                                  |
| `shard.heart`                       | [`ShardHeart`](discordeno_gateway.ShardHeart.md)                                                                                                                             | `undefined`                         | This contains all the heartbeat information                                                                                                                        |
| `shard.id`                          | `number`                                                                                                                                                                     | `options.id`                        | Id of the shard.                                                                                                                                                   |
| `shard.identify`                    | () => `Promise`<`void`\>                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.isOpen`                      | () => `boolean`                                                                                                                                                              | `undefined`                         | -                                                                                                                                                                  |
| `shard.makePresence`                | `undefined` \| (`shardId`: `number`) => [`BotStatusUpdate`](discordeno_gateway.BotStatusUpdate.md) \| `Promise`<[`BotStatusUpdate`](discordeno_gateway.BotStatusUpdate.md)\> | `options.makePresence`              | Function which can be overwritten in order to get the shards presence.                                                                                             |
| `shard.maxRequestsPerRateLimitTick` | `number`                                                                                                                                                                     | `MAX_GATEWAY_REQUESTS_PER_INTERVAL` | The maximum of requests which can be send to discord per rate limit tick. Typically this value should not be changed.                                              |
| `shard.offlineSendQueue`            | (`_?`: `unknown`) => `void`[]                                                                                                                                                | `undefined`                         | Internal state. Only use this if you know what you are doing. Cache for pending gateway requests which should have been send while the gateway went offline.       |
| `shard.previousSequenceNumber`      | `null` \| `number`                                                                                                                                                           | `undefined`                         | The previous payload sequence number.                                                                                                                              |
| `shard.rateLimitResetInterval`      | `number`                                                                                                                                                                     | `GATEWAY_RATE_LIMIT_RESET_INTERVAL` | In which interval (in milliseconds) the gateway resets it's rate limit.                                                                                            |
| `shard.requestIdentify`             | () => `Promise`<`void`\>                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.resolves`                    | `Map`<`"READY"` \| `"RESUMED"` \| `"INVALID_SESSION"`, (`payload`: [`DiscordGatewayPayload`](discordeno_gateway.DiscordGatewayPayload.md)) => `void`\>                       | `undefined`                         | Internal shard map. Only use this map if you know what you are doing. This is used to resolve internal waiting states. Mapped by SelectedEvents => ResolveFunction |
| `shard.resume`                      | () => `Promise`<`void`\>                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.resumeGatewayUrl`            | `string`                                                                                                                                                                     | `''`                                | -                                                                                                                                                                  |
| `shard.send`                        | (`message`: [`ShardSocketRequest`](discordeno_gateway.ShardSocketRequest.md), `highPriority?`: `boolean`) => `Promise`<`void`\>                                              | `undefined`                         | -                                                                                                                                                                  |
| `shard.sessionId`                   | `undefined` \| `string`                                                                                                                                                      | `undefined`                         | Current session id of the shard if present.                                                                                                                        |
| `shard.shutdown`                    | () => `Promise`<`void`\>                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.socket`                      | `undefined` \| `WebSocket`                                                                                                                                                   | `undefined`                         | This contains the WebSocket connection to Discord, if currently connected.                                                                                         |
| `shard.startHeartbeating`           | (`interval`: `number`) => `void`                                                                                                                                             | `undefined`                         | -                                                                                                                                                                  |
| `shard.state`                       | [`ShardState`](../enums/discordeno_gateway.ShardState.md)                                                                                                                    | `ShardState.Offline`                | Current internal state of the shard.                                                                                                                               |
| `shard.stopHeartbeating`            | () => `void`                                                                                                                                                                 | `undefined`                         | -                                                                                                                                                                  |
| `shard.totalShards`                 | `number`                                                                                                                                                                     | `options.totalShards`               | The total amount of shards which are used to communicate with Discord.                                                                                             |
| `code`                              | `number`                                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `reason`                            | `string`                                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |

##### Returns

`void`

#### Defined in

[packages/gateway/src/shard/createShard.ts:269](https://github.com/deepsarda/discordeno/blob/c6dc30bb/packages/gateway/src/shard/createShard.ts#L269)

---

### connect

• `Optional` **connect**: (`shard`: { `bucket`: [`LeakyBucket`](discordeno_gateway.LeakyBucket.md) ; `calculateSafeRequests`: () => `number` ; `close`: (`code`: `number`, `reason`: `string`) => `void` ; `connect`: () => `Promise`<`void`\> ; `events`: [`ShardEvents`](discordeno_gateway.ShardEvents.md) ; `gatewayConfig`: [`ShardGatewayConfig`](discordeno_gateway.ShardGatewayConfig.md) ; `handleClose`: (`close`: `CloseEvent`) => `Promise`<`void`\> ; `handleMessage`: (`message`: `MessageEvent`) => `Promise`<`void`\> ; `heart`: [`ShardHeart`](discordeno_gateway.ShardHeart.md) ; `id`: `number` = options.id; `identify`: () => `Promise`<`void`\> ; `isOpen`: () => `boolean` ; `makePresence`: `undefined` \| (`shardId`: `number`) => [`BotStatusUpdate`](discordeno_gateway.BotStatusUpdate.md) \| `Promise`<[`BotStatusUpdate`](discordeno_gateway.BotStatusUpdate.md)\> = options.makePresence; `maxRequestsPerRateLimitTick`: `number` = MAX_GATEWAY_REQUESTS_PER_INTERVAL; `offlineSendQueue`: (`_?`: `unknown`) => `void`[] ; `previousSequenceNumber`: `null` \| `number` ; `rateLimitResetInterval`: `number` = GATEWAY_RATE_LIMIT_RESET_INTERVAL; `requestIdentify`: () => `Promise`<`void`\> ; `resolves`: `Map`<`"READY"` \| `"RESUMED"` \| `"INVALID_SESSION"`, (`payload`: [`DiscordGatewayPayload`](discordeno_gateway.DiscordGatewayPayload.md)) => `void`\> ; `resume`: () => `Promise`<`void`\> ; `resumeGatewayUrl`: `string` = ''; `send`: (`message`: [`ShardSocketRequest`](discordeno_gateway.ShardSocketRequest.md), `highPriority?`: `boolean`) => `Promise`<`void`\> ; `sessionId`: `undefined` \| `string` ; `shutdown`: () => `Promise`<`void`\> ; `socket`: `undefined` \| `WebSocket` ; `startHeartbeating`: (`interval`: `number`) => `void` ; `state`: [`ShardState`](../enums/discordeno_gateway.ShardState.md) = ShardState.Offline; `stopHeartbeating`: () => `void` ; `totalShards`: `number` = options.totalShards }) => `Promise`<`void`\>

#### Type declaration

▸ (`shard`): `Promise`<`void`\>

Connect the shard with the gateway and start heartbeating.
This will not identify the shard to the gateway.

##### Parameters

| Name                                | Type                                                                                                                                                                         | Default value                       | Description                                                                                                                                                        |
| :---------------------------------- | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :---------------------------------- | :----------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `shard`                             | `Object`                                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.bucket`                      | [`LeakyBucket`](discordeno_gateway.LeakyBucket.md)                                                                                                                           | `undefined`                         | Internal shard bucket. Only access this if you know what you are doing. Bucket for handling shard request rate limits.                                             |
| `shard.calculateSafeRequests`       | () => `number`                                                                                                                                                               | `undefined`                         | -                                                                                                                                                                  |
| `shard.close`                       | (`code`: `number`, `reason`: `string`) => `void`                                                                                                                             | `undefined`                         | -                                                                                                                                                                  |
| `shard.connect`                     | () => `Promise`<`void`\>                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.events`                      | [`ShardEvents`](discordeno_gateway.ShardEvents.md)                                                                                                                           | `undefined`                         | The shard related event handlers.                                                                                                                                  |
| `shard.gatewayConfig`               | [`ShardGatewayConfig`](discordeno_gateway.ShardGatewayConfig.md)                                                                                                             | `undefined`                         | The gateway configuration which is used to connect to Discord.                                                                                                     |
| `shard.handleClose`                 | (`close`: `CloseEvent`) => `Promise`<`void`\>                                                                                                                                | `undefined`                         | -                                                                                                                                                                  |
| `shard.handleMessage`               | (`message`: `MessageEvent`) => `Promise`<`void`\>                                                                                                                            | `undefined`                         | -                                                                                                                                                                  |
| `shard.heart`                       | [`ShardHeart`](discordeno_gateway.ShardHeart.md)                                                                                                                             | `undefined`                         | This contains all the heartbeat information                                                                                                                        |
| `shard.id`                          | `number`                                                                                                                                                                     | `options.id`                        | Id of the shard.                                                                                                                                                   |
| `shard.identify`                    | () => `Promise`<`void`\>                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.isOpen`                      | () => `boolean`                                                                                                                                                              | `undefined`                         | -                                                                                                                                                                  |
| `shard.makePresence`                | `undefined` \| (`shardId`: `number`) => [`BotStatusUpdate`](discordeno_gateway.BotStatusUpdate.md) \| `Promise`<[`BotStatusUpdate`](discordeno_gateway.BotStatusUpdate.md)\> | `options.makePresence`              | Function which can be overwritten in order to get the shards presence.                                                                                             |
| `shard.maxRequestsPerRateLimitTick` | `number`                                                                                                                                                                     | `MAX_GATEWAY_REQUESTS_PER_INTERVAL` | The maximum of requests which can be send to discord per rate limit tick. Typically this value should not be changed.                                              |
| `shard.offlineSendQueue`            | (`_?`: `unknown`) => `void`[]                                                                                                                                                | `undefined`                         | Internal state. Only use this if you know what you are doing. Cache for pending gateway requests which should have been send while the gateway went offline.       |
| `shard.previousSequenceNumber`      | `null` \| `number`                                                                                                                                                           | `undefined`                         | The previous payload sequence number.                                                                                                                              |
| `shard.rateLimitResetInterval`      | `number`                                                                                                                                                                     | `GATEWAY_RATE_LIMIT_RESET_INTERVAL` | In which interval (in milliseconds) the gateway resets it's rate limit.                                                                                            |
| `shard.requestIdentify`             | () => `Promise`<`void`\>                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.resolves`                    | `Map`<`"READY"` \| `"RESUMED"` \| `"INVALID_SESSION"`, (`payload`: [`DiscordGatewayPayload`](discordeno_gateway.DiscordGatewayPayload.md)) => `void`\>                       | `undefined`                         | Internal shard map. Only use this map if you know what you are doing. This is used to resolve internal waiting states. Mapped by SelectedEvents => ResolveFunction |
| `shard.resume`                      | () => `Promise`<`void`\>                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.resumeGatewayUrl`            | `string`                                                                                                                                                                     | `''`                                | -                                                                                                                                                                  |
| `shard.send`                        | (`message`: [`ShardSocketRequest`](discordeno_gateway.ShardSocketRequest.md), `highPriority?`: `boolean`) => `Promise`<`void`\>                                              | `undefined`                         | -                                                                                                                                                                  |
| `shard.sessionId`                   | `undefined` \| `string`                                                                                                                                                      | `undefined`                         | Current session id of the shard if present.                                                                                                                        |
| `shard.shutdown`                    | () => `Promise`<`void`\>                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.socket`                      | `undefined` \| `WebSocket`                                                                                                                                                   | `undefined`                         | This contains the WebSocket connection to Discord, if currently connected.                                                                                         |
| `shard.startHeartbeating`           | (`interval`: `number`) => `void`                                                                                                                                             | `undefined`                         | -                                                                                                                                                                  |
| `shard.state`                       | [`ShardState`](../enums/discordeno_gateway.ShardState.md)                                                                                                                    | `ShardState.Offline`                | Current internal state of the shard.                                                                                                                               |
| `shard.stopHeartbeating`            | () => `void`                                                                                                                                                                 | `undefined`                         | -                                                                                                                                                                  |
| `shard.totalShards`                 | `number`                                                                                                                                                                     | `options.totalShards`               | The total amount of shards which are used to communicate with Discord.                                                                                             |

##### Returns

`Promise`<`void`\>

#### Defined in

[packages/gateway/src/shard/createShard.ts:274](https://github.com/deepsarda/discordeno/blob/c6dc30bb/packages/gateway/src/shard/createShard.ts#L274)

---

### events

• `Optional` **events**: [`ShardEvents`](discordeno_gateway.ShardEvents.md)

The shard related event handlers.

#### Defined in

[packages/gateway/src/shard/createShard.ts:344](https://github.com/deepsarda/discordeno/blob/c6dc30bb/packages/gateway/src/shard/createShard.ts#L344)

---

### gatewayConfig

• **gatewayConfig**: [`PickPartial`](../modules/discordeno_gateway.md#pickpartial)<[`ShardGatewayConfig`](discordeno_gateway.ShardGatewayConfig.md), `"token"`\>

Gateway configuration for the shard.

#### Defined in

[packages/gateway/src/shard/createShard.ts:253](https://github.com/deepsarda/discordeno/blob/c6dc30bb/packages/gateway/src/shard/createShard.ts#L253)

---

### handleClose

• `Optional` `Private` **handleClose**: (`shard`: { `bucket`: [`LeakyBucket`](discordeno_gateway.LeakyBucket.md) ; `calculateSafeRequests`: () => `number` ; `close`: (`code`: `number`, `reason`: `string`) => `void` ; `connect`: () => `Promise`<`void`\> ; `events`: [`ShardEvents`](discordeno_gateway.ShardEvents.md) ; `gatewayConfig`: [`ShardGatewayConfig`](discordeno_gateway.ShardGatewayConfig.md) ; `handleClose`: (`close`: `CloseEvent`) => `Promise`<`void`\> ; `handleMessage`: (`message`: `MessageEvent`) => `Promise`<`void`\> ; `heart`: [`ShardHeart`](discordeno_gateway.ShardHeart.md) ; `id`: `number` = options.id; `identify`: () => `Promise`<`void`\> ; `isOpen`: () => `boolean` ; `makePresence`: `undefined` \| (`shardId`: `number`) => [`BotStatusUpdate`](discordeno_gateway.BotStatusUpdate.md) \| `Promise`<[`BotStatusUpdate`](discordeno_gateway.BotStatusUpdate.md)\> = options.makePresence; `maxRequestsPerRateLimitTick`: `number` = MAX_GATEWAY_REQUESTS_PER_INTERVAL; `offlineSendQueue`: (`_?`: `unknown`) => `void`[] ; `previousSequenceNumber`: `null` \| `number` ; `rateLimitResetInterval`: `number` = GATEWAY_RATE_LIMIT_RESET_INTERVAL; `requestIdentify`: () => `Promise`<`void`\> ; `resolves`: `Map`<`"READY"` \| `"RESUMED"` \| `"INVALID_SESSION"`, (`payload`: [`DiscordGatewayPayload`](discordeno_gateway.DiscordGatewayPayload.md)) => `void`\> ; `resume`: () => `Promise`<`void`\> ; `resumeGatewayUrl`: `string` = ''; `send`: (`message`: [`ShardSocketRequest`](discordeno_gateway.ShardSocketRequest.md), `highPriority?`: `boolean`) => `Promise`<`void`\> ; `sessionId`: `undefined` \| `string` ; `shutdown`: () => `Promise`<`void`\> ; `socket`: `undefined` \| `WebSocket` ; `startHeartbeating`: (`interval`: `number`) => `void` ; `state`: [`ShardState`](../enums/discordeno_gateway.ShardState.md) = ShardState.Offline; `stopHeartbeating`: () => `void` ; `totalShards`: `number` = options.totalShards }, `close`: `CloseEvent`) => `Promise`<`void`\>

#### Type declaration

▸ (`shard`, `close`): `Promise`<`void`\>

Internal shard function.
Only use this function if you know what you are doing.

Handle a gateway connection close.

##### Parameters

| Name                                | Type                                                                                                                                                                         | Default value                       | Description                                                                                                                                                        |
| :---------------------------------- | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :---------------------------------- | :----------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `shard`                             | `Object`                                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.bucket`                      | [`LeakyBucket`](discordeno_gateway.LeakyBucket.md)                                                                                                                           | `undefined`                         | Internal shard bucket. Only access this if you know what you are doing. Bucket for handling shard request rate limits.                                             |
| `shard.calculateSafeRequests`       | () => `number`                                                                                                                                                               | `undefined`                         | -                                                                                                                                                                  |
| `shard.close`                       | (`code`: `number`, `reason`: `string`) => `void`                                                                                                                             | `undefined`                         | -                                                                                                                                                                  |
| `shard.connect`                     | () => `Promise`<`void`\>                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.events`                      | [`ShardEvents`](discordeno_gateway.ShardEvents.md)                                                                                                                           | `undefined`                         | The shard related event handlers.                                                                                                                                  |
| `shard.gatewayConfig`               | [`ShardGatewayConfig`](discordeno_gateway.ShardGatewayConfig.md)                                                                                                             | `undefined`                         | The gateway configuration which is used to connect to Discord.                                                                                                     |
| `shard.handleClose`                 | (`close`: `CloseEvent`) => `Promise`<`void`\>                                                                                                                                | `undefined`                         | -                                                                                                                                                                  |
| `shard.handleMessage`               | (`message`: `MessageEvent`) => `Promise`<`void`\>                                                                                                                            | `undefined`                         | -                                                                                                                                                                  |
| `shard.heart`                       | [`ShardHeart`](discordeno_gateway.ShardHeart.md)                                                                                                                             | `undefined`                         | This contains all the heartbeat information                                                                                                                        |
| `shard.id`                          | `number`                                                                                                                                                                     | `options.id`                        | Id of the shard.                                                                                                                                                   |
| `shard.identify`                    | () => `Promise`<`void`\>                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.isOpen`                      | () => `boolean`                                                                                                                                                              | `undefined`                         | -                                                                                                                                                                  |
| `shard.makePresence`                | `undefined` \| (`shardId`: `number`) => [`BotStatusUpdate`](discordeno_gateway.BotStatusUpdate.md) \| `Promise`<[`BotStatusUpdate`](discordeno_gateway.BotStatusUpdate.md)\> | `options.makePresence`              | Function which can be overwritten in order to get the shards presence.                                                                                             |
| `shard.maxRequestsPerRateLimitTick` | `number`                                                                                                                                                                     | `MAX_GATEWAY_REQUESTS_PER_INTERVAL` | The maximum of requests which can be send to discord per rate limit tick. Typically this value should not be changed.                                              |
| `shard.offlineSendQueue`            | (`_?`: `unknown`) => `void`[]                                                                                                                                                | `undefined`                         | Internal state. Only use this if you know what you are doing. Cache for pending gateway requests which should have been send while the gateway went offline.       |
| `shard.previousSequenceNumber`      | `null` \| `number`                                                                                                                                                           | `undefined`                         | The previous payload sequence number.                                                                                                                              |
| `shard.rateLimitResetInterval`      | `number`                                                                                                                                                                     | `GATEWAY_RATE_LIMIT_RESET_INTERVAL` | In which interval (in milliseconds) the gateway resets it's rate limit.                                                                                            |
| `shard.requestIdentify`             | () => `Promise`<`void`\>                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.resolves`                    | `Map`<`"READY"` \| `"RESUMED"` \| `"INVALID_SESSION"`, (`payload`: [`DiscordGatewayPayload`](discordeno_gateway.DiscordGatewayPayload.md)) => `void`\>                       | `undefined`                         | Internal shard map. Only use this map if you know what you are doing. This is used to resolve internal waiting states. Mapped by SelectedEvents => ResolveFunction |
| `shard.resume`                      | () => `Promise`<`void`\>                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.resumeGatewayUrl`            | `string`                                                                                                                                                                     | `''`                                | -                                                                                                                                                                  |
| `shard.send`                        | (`message`: [`ShardSocketRequest`](discordeno_gateway.ShardSocketRequest.md), `highPriority?`: `boolean`) => `Promise`<`void`\>                                              | `undefined`                         | -                                                                                                                                                                  |
| `shard.sessionId`                   | `undefined` \| `string`                                                                                                                                                      | `undefined`                         | Current session id of the shard if present.                                                                                                                        |
| `shard.shutdown`                    | () => `Promise`<`void`\>                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.socket`                      | `undefined` \| `WebSocket`                                                                                                                                                   | `undefined`                         | This contains the WebSocket connection to Discord, if currently connected.                                                                                         |
| `shard.startHeartbeating`           | (`interval`: `number`) => `void`                                                                                                                                             | `undefined`                         | -                                                                                                                                                                  |
| `shard.state`                       | [`ShardState`](../enums/discordeno_gateway.ShardState.md)                                                                                                                    | `ShardState.Offline`                | Current internal state of the shard.                                                                                                                               |
| `shard.stopHeartbeating`            | () => `void`                                                                                                                                                                 | `undefined`                         | -                                                                                                                                                                  |
| `shard.totalShards`                 | `number`                                                                                                                                                                     | `options.totalShards`               | The total amount of shards which are used to communicate with Discord.                                                                                             |
| `close`                             | `CloseEvent`                                                                                                                                                                 | `undefined`                         | -                                                                                                                                                                  |

##### Returns

`Promise`<`void`\>

#### Defined in

[packages/gateway/src/shard/createShard.ts:281](https://github.com/deepsarda/discordeno/blob/c6dc30bb/packages/gateway/src/shard/createShard.ts#L281)

---

### handleMessage

• `Optional` `Private` **handleMessage**: (`shard`: { `bucket`: [`LeakyBucket`](discordeno_gateway.LeakyBucket.md) ; `calculateSafeRequests`: () => `number` ; `close`: (`code`: `number`, `reason`: `string`) => `void` ; `connect`: () => `Promise`<`void`\> ; `events`: [`ShardEvents`](discordeno_gateway.ShardEvents.md) ; `gatewayConfig`: [`ShardGatewayConfig`](discordeno_gateway.ShardGatewayConfig.md) ; `handleClose`: (`close`: `CloseEvent`) => `Promise`<`void`\> ; `handleMessage`: (`message`: `MessageEvent`) => `Promise`<`void`\> ; `heart`: [`ShardHeart`](discordeno_gateway.ShardHeart.md) ; `id`: `number` = options.id; `identify`: () => `Promise`<`void`\> ; `isOpen`: () => `boolean` ; `makePresence`: `undefined` \| (`shardId`: `number`) => [`BotStatusUpdate`](discordeno_gateway.BotStatusUpdate.md) \| `Promise`<[`BotStatusUpdate`](discordeno_gateway.BotStatusUpdate.md)\> = options.makePresence; `maxRequestsPerRateLimitTick`: `number` = MAX_GATEWAY_REQUESTS_PER_INTERVAL; `offlineSendQueue`: (`_?`: `unknown`) => `void`[] ; `previousSequenceNumber`: `null` \| `number` ; `rateLimitResetInterval`: `number` = GATEWAY_RATE_LIMIT_RESET_INTERVAL; `requestIdentify`: () => `Promise`<`void`\> ; `resolves`: `Map`<`"READY"` \| `"RESUMED"` \| `"INVALID_SESSION"`, (`payload`: [`DiscordGatewayPayload`](discordeno_gateway.DiscordGatewayPayload.md)) => `void`\> ; `resume`: () => `Promise`<`void`\> ; `resumeGatewayUrl`: `string` = ''; `send`: (`message`: [`ShardSocketRequest`](discordeno_gateway.ShardSocketRequest.md), `highPriority?`: `boolean`) => `Promise`<`void`\> ; `sessionId`: `undefined` \| `string` ; `shutdown`: () => `Promise`<`void`\> ; `socket`: `undefined` \| `WebSocket` ; `startHeartbeating`: (`interval`: `number`) => `void` ; `state`: [`ShardState`](../enums/discordeno_gateway.ShardState.md) = ShardState.Offline; `stopHeartbeating`: () => `void` ; `totalShards`: `number` = options.totalShards }, `message`: `MessageEvent`) => `Promise`<`void`\>

#### Type declaration

▸ (`shard`, `message`): `Promise`<`void`\>

Internal shard function.
Only use this function if you know what you are doing.

Handle an incoming gateway message.

##### Parameters

| Name                                | Type                                                                                                                                                                         | Default value                       | Description                                                                                                                                                        |
| :---------------------------------- | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :---------------------------------- | :----------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `shard`                             | `Object`                                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.bucket`                      | [`LeakyBucket`](discordeno_gateway.LeakyBucket.md)                                                                                                                           | `undefined`                         | Internal shard bucket. Only access this if you know what you are doing. Bucket for handling shard request rate limits.                                             |
| `shard.calculateSafeRequests`       | () => `number`                                                                                                                                                               | `undefined`                         | -                                                                                                                                                                  |
| `shard.close`                       | (`code`: `number`, `reason`: `string`) => `void`                                                                                                                             | `undefined`                         | -                                                                                                                                                                  |
| `shard.connect`                     | () => `Promise`<`void`\>                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.events`                      | [`ShardEvents`](discordeno_gateway.ShardEvents.md)                                                                                                                           | `undefined`                         | The shard related event handlers.                                                                                                                                  |
| `shard.gatewayConfig`               | [`ShardGatewayConfig`](discordeno_gateway.ShardGatewayConfig.md)                                                                                                             | `undefined`                         | The gateway configuration which is used to connect to Discord.                                                                                                     |
| `shard.handleClose`                 | (`close`: `CloseEvent`) => `Promise`<`void`\>                                                                                                                                | `undefined`                         | -                                                                                                                                                                  |
| `shard.handleMessage`               | (`message`: `MessageEvent`) => `Promise`<`void`\>                                                                                                                            | `undefined`                         | -                                                                                                                                                                  |
| `shard.heart`                       | [`ShardHeart`](discordeno_gateway.ShardHeart.md)                                                                                                                             | `undefined`                         | This contains all the heartbeat information                                                                                                                        |
| `shard.id`                          | `number`                                                                                                                                                                     | `options.id`                        | Id of the shard.                                                                                                                                                   |
| `shard.identify`                    | () => `Promise`<`void`\>                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.isOpen`                      | () => `boolean`                                                                                                                                                              | `undefined`                         | -                                                                                                                                                                  |
| `shard.makePresence`                | `undefined` \| (`shardId`: `number`) => [`BotStatusUpdate`](discordeno_gateway.BotStatusUpdate.md) \| `Promise`<[`BotStatusUpdate`](discordeno_gateway.BotStatusUpdate.md)\> | `options.makePresence`              | Function which can be overwritten in order to get the shards presence.                                                                                             |
| `shard.maxRequestsPerRateLimitTick` | `number`                                                                                                                                                                     | `MAX_GATEWAY_REQUESTS_PER_INTERVAL` | The maximum of requests which can be send to discord per rate limit tick. Typically this value should not be changed.                                              |
| `shard.offlineSendQueue`            | (`_?`: `unknown`) => `void`[]                                                                                                                                                | `undefined`                         | Internal state. Only use this if you know what you are doing. Cache for pending gateway requests which should have been send while the gateway went offline.       |
| `shard.previousSequenceNumber`      | `null` \| `number`                                                                                                                                                           | `undefined`                         | The previous payload sequence number.                                                                                                                              |
| `shard.rateLimitResetInterval`      | `number`                                                                                                                                                                     | `GATEWAY_RATE_LIMIT_RESET_INTERVAL` | In which interval (in milliseconds) the gateway resets it's rate limit.                                                                                            |
| `shard.requestIdentify`             | () => `Promise`<`void`\>                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.resolves`                    | `Map`<`"READY"` \| `"RESUMED"` \| `"INVALID_SESSION"`, (`payload`: [`DiscordGatewayPayload`](discordeno_gateway.DiscordGatewayPayload.md)) => `void`\>                       | `undefined`                         | Internal shard map. Only use this map if you know what you are doing. This is used to resolve internal waiting states. Mapped by SelectedEvents => ResolveFunction |
| `shard.resume`                      | () => `Promise`<`void`\>                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.resumeGatewayUrl`            | `string`                                                                                                                                                                     | `''`                                | -                                                                                                                                                                  |
| `shard.send`                        | (`message`: [`ShardSocketRequest`](discordeno_gateway.ShardSocketRequest.md), `highPriority?`: `boolean`) => `Promise`<`void`\>                                              | `undefined`                         | -                                                                                                                                                                  |
| `shard.sessionId`                   | `undefined` \| `string`                                                                                                                                                      | `undefined`                         | Current session id of the shard if present.                                                                                                                        |
| `shard.shutdown`                    | () => `Promise`<`void`\>                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.socket`                      | `undefined` \| `WebSocket`                                                                                                                                                   | `undefined`                         | This contains the WebSocket connection to Discord, if currently connected.                                                                                         |
| `shard.startHeartbeating`           | (`interval`: `number`) => `void`                                                                                                                                             | `undefined`                         | -                                                                                                                                                                  |
| `shard.state`                       | [`ShardState`](../enums/discordeno_gateway.ShardState.md)                                                                                                                    | `ShardState.Offline`                | Current internal state of the shard.                                                                                                                               |
| `shard.stopHeartbeating`            | () => `void`                                                                                                                                                                 | `undefined`                         | -                                                                                                                                                                  |
| `shard.totalShards`                 | `number`                                                                                                                                                                     | `options.totalShards`               | The total amount of shards which are used to communicate with Discord.                                                                                             |
| `message`                           | `MessageEvent`                                                                                                                                                               | `undefined`                         | -                                                                                                                                                                  |

##### Returns

`Promise`<`void`\>

#### Defined in

[packages/gateway/src/shard/createShard.ts:288](https://github.com/deepsarda/discordeno/blob/c6dc30bb/packages/gateway/src/shard/createShard.ts#L288)

---

### heart

• `Optional` **heart**: [`ShardHeart`](discordeno_gateway.ShardHeart.md)

This contains all the heartbeat information

#### Defined in

[packages/gateway/src/shard/createShard.ts:346](https://github.com/deepsarda/discordeno/blob/c6dc30bb/packages/gateway/src/shard/createShard.ts#L346)

---

### id

• **id**: `number`

Id of the shard which should be created.

#### Defined in

[packages/gateway/src/shard/createShard.ts:250](https://github.com/deepsarda/discordeno/blob/c6dc30bb/packages/gateway/src/shard/createShard.ts#L250)

---

### identify

• `Optional` **identify**: (`shard`: { `bucket`: [`LeakyBucket`](discordeno_gateway.LeakyBucket.md) ; `calculateSafeRequests`: () => `number` ; `close`: (`code`: `number`, `reason`: `string`) => `void` ; `connect`: () => `Promise`<`void`\> ; `events`: [`ShardEvents`](discordeno_gateway.ShardEvents.md) ; `gatewayConfig`: [`ShardGatewayConfig`](discordeno_gateway.ShardGatewayConfig.md) ; `handleClose`: (`close`: `CloseEvent`) => `Promise`<`void`\> ; `handleMessage`: (`message`: `MessageEvent`) => `Promise`<`void`\> ; `heart`: [`ShardHeart`](discordeno_gateway.ShardHeart.md) ; `id`: `number` = options.id; `identify`: () => `Promise`<`void`\> ; `isOpen`: () => `boolean` ; `makePresence`: `undefined` \| (`shardId`: `number`) => [`BotStatusUpdate`](discordeno_gateway.BotStatusUpdate.md) \| `Promise`<[`BotStatusUpdate`](discordeno_gateway.BotStatusUpdate.md)\> = options.makePresence; `maxRequestsPerRateLimitTick`: `number` = MAX_GATEWAY_REQUESTS_PER_INTERVAL; `offlineSendQueue`: (`_?`: `unknown`) => `void`[] ; `previousSequenceNumber`: `null` \| `number` ; `rateLimitResetInterval`: `number` = GATEWAY_RATE_LIMIT_RESET_INTERVAL; `requestIdentify`: () => `Promise`<`void`\> ; `resolves`: `Map`<`"READY"` \| `"RESUMED"` \| `"INVALID_SESSION"`, (`payload`: [`DiscordGatewayPayload`](discordeno_gateway.DiscordGatewayPayload.md)) => `void`\> ; `resume`: () => `Promise`<`void`\> ; `resumeGatewayUrl`: `string` = ''; `send`: (`message`: [`ShardSocketRequest`](discordeno_gateway.ShardSocketRequest.md), `highPriority?`: `boolean`) => `Promise`<`void`\> ; `sessionId`: `undefined` \| `string` ; `shutdown`: () => `Promise`<`void`\> ; `socket`: `undefined` \| `WebSocket` ; `startHeartbeating`: (`interval`: `number`) => `void` ; `state`: [`ShardState`](../enums/discordeno_gateway.ShardState.md) = ShardState.Offline; `stopHeartbeating`: () => `void` ; `totalShards`: `number` = options.totalShards }) => `Promise`<`void`\>

#### Type declaration

▸ (`shard`): `Promise`<`void`\>

Identify the shard to the gateway.
If not connected, this will also connect the shard to the gateway.

##### Parameters

| Name                                | Type                                                                                                                                                                         | Default value                       | Description                                                                                                                                                        |
| :---------------------------------- | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :---------------------------------- | :----------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `shard`                             | `Object`                                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.bucket`                      | [`LeakyBucket`](discordeno_gateway.LeakyBucket.md)                                                                                                                           | `undefined`                         | Internal shard bucket. Only access this if you know what you are doing. Bucket for handling shard request rate limits.                                             |
| `shard.calculateSafeRequests`       | () => `number`                                                                                                                                                               | `undefined`                         | -                                                                                                                                                                  |
| `shard.close`                       | (`code`: `number`, `reason`: `string`) => `void`                                                                                                                             | `undefined`                         | -                                                                                                                                                                  |
| `shard.connect`                     | () => `Promise`<`void`\>                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.events`                      | [`ShardEvents`](discordeno_gateway.ShardEvents.md)                                                                                                                           | `undefined`                         | The shard related event handlers.                                                                                                                                  |
| `shard.gatewayConfig`               | [`ShardGatewayConfig`](discordeno_gateway.ShardGatewayConfig.md)                                                                                                             | `undefined`                         | The gateway configuration which is used to connect to Discord.                                                                                                     |
| `shard.handleClose`                 | (`close`: `CloseEvent`) => `Promise`<`void`\>                                                                                                                                | `undefined`                         | -                                                                                                                                                                  |
| `shard.handleMessage`               | (`message`: `MessageEvent`) => `Promise`<`void`\>                                                                                                                            | `undefined`                         | -                                                                                                                                                                  |
| `shard.heart`                       | [`ShardHeart`](discordeno_gateway.ShardHeart.md)                                                                                                                             | `undefined`                         | This contains all the heartbeat information                                                                                                                        |
| `shard.id`                          | `number`                                                                                                                                                                     | `options.id`                        | Id of the shard.                                                                                                                                                   |
| `shard.identify`                    | () => `Promise`<`void`\>                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.isOpen`                      | () => `boolean`                                                                                                                                                              | `undefined`                         | -                                                                                                                                                                  |
| `shard.makePresence`                | `undefined` \| (`shardId`: `number`) => [`BotStatusUpdate`](discordeno_gateway.BotStatusUpdate.md) \| `Promise`<[`BotStatusUpdate`](discordeno_gateway.BotStatusUpdate.md)\> | `options.makePresence`              | Function which can be overwritten in order to get the shards presence.                                                                                             |
| `shard.maxRequestsPerRateLimitTick` | `number`                                                                                                                                                                     | `MAX_GATEWAY_REQUESTS_PER_INTERVAL` | The maximum of requests which can be send to discord per rate limit tick. Typically this value should not be changed.                                              |
| `shard.offlineSendQueue`            | (`_?`: `unknown`) => `void`[]                                                                                                                                                | `undefined`                         | Internal state. Only use this if you know what you are doing. Cache for pending gateway requests which should have been send while the gateway went offline.       |
| `shard.previousSequenceNumber`      | `null` \| `number`                                                                                                                                                           | `undefined`                         | The previous payload sequence number.                                                                                                                              |
| `shard.rateLimitResetInterval`      | `number`                                                                                                                                                                     | `GATEWAY_RATE_LIMIT_RESET_INTERVAL` | In which interval (in milliseconds) the gateway resets it's rate limit.                                                                                            |
| `shard.requestIdentify`             | () => `Promise`<`void`\>                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.resolves`                    | `Map`<`"READY"` \| `"RESUMED"` \| `"INVALID_SESSION"`, (`payload`: [`DiscordGatewayPayload`](discordeno_gateway.DiscordGatewayPayload.md)) => `void`\>                       | `undefined`                         | Internal shard map. Only use this map if you know what you are doing. This is used to resolve internal waiting states. Mapped by SelectedEvents => ResolveFunction |
| `shard.resume`                      | () => `Promise`<`void`\>                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.resumeGatewayUrl`            | `string`                                                                                                                                                                     | `''`                                | -                                                                                                                                                                  |
| `shard.send`                        | (`message`: [`ShardSocketRequest`](discordeno_gateway.ShardSocketRequest.md), `highPriority?`: `boolean`) => `Promise`<`void`\>                                              | `undefined`                         | -                                                                                                                                                                  |
| `shard.sessionId`                   | `undefined` \| `string`                                                                                                                                                      | `undefined`                         | Current session id of the shard if present.                                                                                                                        |
| `shard.shutdown`                    | () => `Promise`<`void`\>                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.socket`                      | `undefined` \| `WebSocket`                                                                                                                                                   | `undefined`                         | This contains the WebSocket connection to Discord, if currently connected.                                                                                         |
| `shard.startHeartbeating`           | (`interval`: `number`) => `void`                                                                                                                                             | `undefined`                         | -                                                                                                                                                                  |
| `shard.state`                       | [`ShardState`](../enums/discordeno_gateway.ShardState.md)                                                                                                                    | `ShardState.Offline`                | Current internal state of the shard.                                                                                                                               |
| `shard.stopHeartbeating`            | () => `void`                                                                                                                                                                 | `undefined`                         | -                                                                                                                                                                  |
| `shard.totalShards`                 | `number`                                                                                                                                                                     | `options.totalShards`               | The total amount of shards which are used to communicate with Discord.                                                                                             |

##### Returns

`Promise`<`void`\>

#### Defined in

[packages/gateway/src/shard/createShard.ts:293](https://github.com/deepsarda/discordeno/blob/c6dc30bb/packages/gateway/src/shard/createShard.ts#L293)

---

### isOpen

• `Optional` **isOpen**: (`shard`: { `bucket`: [`LeakyBucket`](discordeno_gateway.LeakyBucket.md) ; `calculateSafeRequests`: () => `number` ; `close`: (`code`: `number`, `reason`: `string`) => `void` ; `connect`: () => `Promise`<`void`\> ; `events`: [`ShardEvents`](discordeno_gateway.ShardEvents.md) ; `gatewayConfig`: [`ShardGatewayConfig`](discordeno_gateway.ShardGatewayConfig.md) ; `handleClose`: (`close`: `CloseEvent`) => `Promise`<`void`\> ; `handleMessage`: (`message`: `MessageEvent`) => `Promise`<`void`\> ; `heart`: [`ShardHeart`](discordeno_gateway.ShardHeart.md) ; `id`: `number` = options.id; `identify`: () => `Promise`<`void`\> ; `isOpen`: () => `boolean` ; `makePresence`: `undefined` \| (`shardId`: `number`) => [`BotStatusUpdate`](discordeno_gateway.BotStatusUpdate.md) \| `Promise`<[`BotStatusUpdate`](discordeno_gateway.BotStatusUpdate.md)\> = options.makePresence; `maxRequestsPerRateLimitTick`: `number` = MAX_GATEWAY_REQUESTS_PER_INTERVAL; `offlineSendQueue`: (`_?`: `unknown`) => `void`[] ; `previousSequenceNumber`: `null` \| `number` ; `rateLimitResetInterval`: `number` = GATEWAY_RATE_LIMIT_RESET_INTERVAL; `requestIdentify`: () => `Promise`<`void`\> ; `resolves`: `Map`<`"READY"` \| `"RESUMED"` \| `"INVALID_SESSION"`, (`payload`: [`DiscordGatewayPayload`](discordeno_gateway.DiscordGatewayPayload.md)) => `void`\> ; `resume`: () => `Promise`<`void`\> ; `resumeGatewayUrl`: `string` = ''; `send`: (`message`: [`ShardSocketRequest`](discordeno_gateway.ShardSocketRequest.md), `highPriority?`: `boolean`) => `Promise`<`void`\> ; `sessionId`: `undefined` \| `string` ; `shutdown`: () => `Promise`<`void`\> ; `socket`: `undefined` \| `WebSocket` ; `startHeartbeating`: (`interval`: `number`) => `void` ; `state`: [`ShardState`](../enums/discordeno_gateway.ShardState.md) = ShardState.Offline; `stopHeartbeating`: () => `void` ; `totalShards`: `number` = options.totalShards }) => `boolean`

#### Type declaration

▸ (`shard`): `boolean`

Check whether the connection to Discord is currently open.

##### Parameters

| Name                                | Type                                                                                                                                                                         | Default value                       | Description                                                                                                                                                        |
| :---------------------------------- | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :---------------------------------- | :----------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `shard`                             | `Object`                                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.bucket`                      | [`LeakyBucket`](discordeno_gateway.LeakyBucket.md)                                                                                                                           | `undefined`                         | Internal shard bucket. Only access this if you know what you are doing. Bucket for handling shard request rate limits.                                             |
| `shard.calculateSafeRequests`       | () => `number`                                                                                                                                                               | `undefined`                         | -                                                                                                                                                                  |
| `shard.close`                       | (`code`: `number`, `reason`: `string`) => `void`                                                                                                                             | `undefined`                         | -                                                                                                                                                                  |
| `shard.connect`                     | () => `Promise`<`void`\>                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.events`                      | [`ShardEvents`](discordeno_gateway.ShardEvents.md)                                                                                                                           | `undefined`                         | The shard related event handlers.                                                                                                                                  |
| `shard.gatewayConfig`               | [`ShardGatewayConfig`](discordeno_gateway.ShardGatewayConfig.md)                                                                                                             | `undefined`                         | The gateway configuration which is used to connect to Discord.                                                                                                     |
| `shard.handleClose`                 | (`close`: `CloseEvent`) => `Promise`<`void`\>                                                                                                                                | `undefined`                         | -                                                                                                                                                                  |
| `shard.handleMessage`               | (`message`: `MessageEvent`) => `Promise`<`void`\>                                                                                                                            | `undefined`                         | -                                                                                                                                                                  |
| `shard.heart`                       | [`ShardHeart`](discordeno_gateway.ShardHeart.md)                                                                                                                             | `undefined`                         | This contains all the heartbeat information                                                                                                                        |
| `shard.id`                          | `number`                                                                                                                                                                     | `options.id`                        | Id of the shard.                                                                                                                                                   |
| `shard.identify`                    | () => `Promise`<`void`\>                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.isOpen`                      | () => `boolean`                                                                                                                                                              | `undefined`                         | -                                                                                                                                                                  |
| `shard.makePresence`                | `undefined` \| (`shardId`: `number`) => [`BotStatusUpdate`](discordeno_gateway.BotStatusUpdate.md) \| `Promise`<[`BotStatusUpdate`](discordeno_gateway.BotStatusUpdate.md)\> | `options.makePresence`              | Function which can be overwritten in order to get the shards presence.                                                                                             |
| `shard.maxRequestsPerRateLimitTick` | `number`                                                                                                                                                                     | `MAX_GATEWAY_REQUESTS_PER_INTERVAL` | The maximum of requests which can be send to discord per rate limit tick. Typically this value should not be changed.                                              |
| `shard.offlineSendQueue`            | (`_?`: `unknown`) => `void`[]                                                                                                                                                | `undefined`                         | Internal state. Only use this if you know what you are doing. Cache for pending gateway requests which should have been send while the gateway went offline.       |
| `shard.previousSequenceNumber`      | `null` \| `number`                                                                                                                                                           | `undefined`                         | The previous payload sequence number.                                                                                                                              |
| `shard.rateLimitResetInterval`      | `number`                                                                                                                                                                     | `GATEWAY_RATE_LIMIT_RESET_INTERVAL` | In which interval (in milliseconds) the gateway resets it's rate limit.                                                                                            |
| `shard.requestIdentify`             | () => `Promise`<`void`\>                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.resolves`                    | `Map`<`"READY"` \| `"RESUMED"` \| `"INVALID_SESSION"`, (`payload`: [`DiscordGatewayPayload`](discordeno_gateway.DiscordGatewayPayload.md)) => `void`\>                       | `undefined`                         | Internal shard map. Only use this map if you know what you are doing. This is used to resolve internal waiting states. Mapped by SelectedEvents => ResolveFunction |
| `shard.resume`                      | () => `Promise`<`void`\>                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.resumeGatewayUrl`            | `string`                                                                                                                                                                     | `''`                                | -                                                                                                                                                                  |
| `shard.send`                        | (`message`: [`ShardSocketRequest`](discordeno_gateway.ShardSocketRequest.md), `highPriority?`: `boolean`) => `Promise`<`void`\>                                              | `undefined`                         | -                                                                                                                                                                  |
| `shard.sessionId`                   | `undefined` \| `string`                                                                                                                                                      | `undefined`                         | Current session id of the shard if present.                                                                                                                        |
| `shard.shutdown`                    | () => `Promise`<`void`\>                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.socket`                      | `undefined` \| `WebSocket`                                                                                                                                                   | `undefined`                         | This contains the WebSocket connection to Discord, if currently connected.                                                                                         |
| `shard.startHeartbeating`           | (`interval`: `number`) => `void`                                                                                                                                             | `undefined`                         | -                                                                                                                                                                  |
| `shard.state`                       | [`ShardState`](../enums/discordeno_gateway.ShardState.md)                                                                                                                    | `ShardState.Offline`                | Current internal state of the shard.                                                                                                                               |
| `shard.stopHeartbeating`            | () => `void`                                                                                                                                                                 | `undefined`                         | -                                                                                                                                                                  |
| `shard.totalShards`                 | `number`                                                                                                                                                                     | `options.totalShards`               | The total amount of shards which are used to communicate with Discord.                                                                                             |

##### Returns

`boolean`

#### Defined in

[packages/gateway/src/shard/createShard.ts:296](https://github.com/deepsarda/discordeno/blob/c6dc30bb/packages/gateway/src/shard/createShard.ts#L296)

---

### makePresence

• `Optional` **makePresence**: (`shardId`: `number`) => [`BotStatusUpdate`](discordeno_gateway.BotStatusUpdate.md) \| `Promise`<[`BotStatusUpdate`](discordeno_gateway.BotStatusUpdate.md)\>

#### Type declaration

▸ (`shardId`): [`BotStatusUpdate`](discordeno_gateway.BotStatusUpdate.md) \| `Promise`<[`BotStatusUpdate`](discordeno_gateway.BotStatusUpdate.md)\>

Function which can be overwritten in order to get the shards presence.

##### Parameters

| Name      | Type     |
| :-------- | :------- |
| `shardId` | `number` |

##### Returns

[`BotStatusUpdate`](discordeno_gateway.BotStatusUpdate.md) \| `Promise`<[`BotStatusUpdate`](discordeno_gateway.BotStatusUpdate.md)\>

#### Defined in

[packages/gateway/src/shard/createShard.ts:299](https://github.com/deepsarda/discordeno/blob/c6dc30bb/packages/gateway/src/shard/createShard.ts#L299)

---

### maxRequestsPerRateLimitTick

• `Optional` **maxRequestsPerRateLimitTick**: `number`

The maximum of requests which can be send to discord per rate limit tick.
Typically this value should not be changed.

#### Defined in

[packages/gateway/src/shard/createShard.ts:304](https://github.com/deepsarda/discordeno/blob/c6dc30bb/packages/gateway/src/shard/createShard.ts#L304)

---

### offlineSendQueue

• `Optional` **offlineSendQueue**: [`ShardSocketRequest`](discordeno_gateway.ShardSocketRequest.md)[]

Cache for pending gateway requests which should have been send while the gateway went offline.

#### Defined in

[packages/gateway/src/shard/createShard.ts:350](https://github.com/deepsarda/discordeno/blob/c6dc30bb/packages/gateway/src/shard/createShard.ts#L350)

---

### previousSequenceNumber

• `Optional` **previousSequenceNumber**: `number`

The previous payload sequence number.

#### Defined in

[packages/gateway/src/shard/createShard.ts:307](https://github.com/deepsarda/discordeno/blob/c6dc30bb/packages/gateway/src/shard/createShard.ts#L307)

---

### rateLimitResetInterval

• `Optional` **rateLimitResetInterval**: `number`

In which interval (in milliseconds) the gateway resets it's rate limit.

#### Defined in

[packages/gateway/src/shard/createShard.ts:310](https://github.com/deepsarda/discordeno/blob/c6dc30bb/packages/gateway/src/shard/createShard.ts#L310)

---

### requestIdentify

• **requestIdentify**: (`shardId`: `number`) => `Promise`<`void`\>

#### Type declaration

▸ (`shardId`): `Promise`<`void`\>

This function communicates with the management process, in order to know whether its free to identify.
When this function resolves, this means that the shard is allowed to send an identify payload to discord.

##### Parameters

| Name      | Type     |
| :-------- | :------- |
| `shardId` | `number` |

##### Returns

`Promise`<`void`\>

#### Defined in

[packages/gateway/src/shard/createShard.ts:261](https://github.com/deepsarda/discordeno/blob/c6dc30bb/packages/gateway/src/shard/createShard.ts#L261)

---

### resolves

• `Optional` **resolves**: `Map`<`"READY"` \| `"RESUMED"` \| `"INVALID_SESSION"`, (`payload`: [`DiscordGatewayPayload`](discordeno_gateway.DiscordGatewayPayload.md)) => `void`\>

This is used to resolve internal waiting states.
Mapped by SelectedEvents => ResolveFunction

#### Defined in

[packages/gateway/src/shard/createShard.ts:354](https://github.com/deepsarda/discordeno/blob/c6dc30bb/packages/gateway/src/shard/createShard.ts#L354)

---

### resume

• `Optional` **resume**: (`shard`: { `bucket`: [`LeakyBucket`](discordeno_gateway.LeakyBucket.md) ; `calculateSafeRequests`: () => `number` ; `close`: (`code`: `number`, `reason`: `string`) => `void` ; `connect`: () => `Promise`<`void`\> ; `events`: [`ShardEvents`](discordeno_gateway.ShardEvents.md) ; `gatewayConfig`: [`ShardGatewayConfig`](discordeno_gateway.ShardGatewayConfig.md) ; `handleClose`: (`close`: `CloseEvent`) => `Promise`<`void`\> ; `handleMessage`: (`message`: `MessageEvent`) => `Promise`<`void`\> ; `heart`: [`ShardHeart`](discordeno_gateway.ShardHeart.md) ; `id`: `number` = options.id; `identify`: () => `Promise`<`void`\> ; `isOpen`: () => `boolean` ; `makePresence`: `undefined` \| (`shardId`: `number`) => [`BotStatusUpdate`](discordeno_gateway.BotStatusUpdate.md) \| `Promise`<[`BotStatusUpdate`](discordeno_gateway.BotStatusUpdate.md)\> = options.makePresence; `maxRequestsPerRateLimitTick`: `number` = MAX_GATEWAY_REQUESTS_PER_INTERVAL; `offlineSendQueue`: (`_?`: `unknown`) => `void`[] ; `previousSequenceNumber`: `null` \| `number` ; `rateLimitResetInterval`: `number` = GATEWAY_RATE_LIMIT_RESET_INTERVAL; `requestIdentify`: () => `Promise`<`void`\> ; `resolves`: `Map`<`"READY"` \| `"RESUMED"` \| `"INVALID_SESSION"`, (`payload`: [`DiscordGatewayPayload`](discordeno_gateway.DiscordGatewayPayload.md)) => `void`\> ; `resume`: () => `Promise`<`void`\> ; `resumeGatewayUrl`: `string` = ''; `send`: (`message`: [`ShardSocketRequest`](discordeno_gateway.ShardSocketRequest.md), `highPriority?`: `boolean`) => `Promise`<`void`\> ; `sessionId`: `undefined` \| `string` ; `shutdown`: () => `Promise`<`void`\> ; `socket`: `undefined` \| `WebSocket` ; `startHeartbeating`: (`interval`: `number`) => `void` ; `state`: [`ShardState`](../enums/discordeno_gateway.ShardState.md) = ShardState.Offline; `stopHeartbeating`: () => `void` ; `totalShards`: `number` = options.totalShards }) => `Promise`<`void`\>

#### Type declaration

▸ (`shard`): `Promise`<`void`\>

Attempt to resume the previous shards session with the gateway.

##### Parameters

| Name                                | Type                                                                                                                                                                         | Default value                       | Description                                                                                                                                                        |
| :---------------------------------- | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :---------------------------------- | :----------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `shard`                             | `Object`                                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.bucket`                      | [`LeakyBucket`](discordeno_gateway.LeakyBucket.md)                                                                                                                           | `undefined`                         | Internal shard bucket. Only access this if you know what you are doing. Bucket for handling shard request rate limits.                                             |
| `shard.calculateSafeRequests`       | () => `number`                                                                                                                                                               | `undefined`                         | -                                                                                                                                                                  |
| `shard.close`                       | (`code`: `number`, `reason`: `string`) => `void`                                                                                                                             | `undefined`                         | -                                                                                                                                                                  |
| `shard.connect`                     | () => `Promise`<`void`\>                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.events`                      | [`ShardEvents`](discordeno_gateway.ShardEvents.md)                                                                                                                           | `undefined`                         | The shard related event handlers.                                                                                                                                  |
| `shard.gatewayConfig`               | [`ShardGatewayConfig`](discordeno_gateway.ShardGatewayConfig.md)                                                                                                             | `undefined`                         | The gateway configuration which is used to connect to Discord.                                                                                                     |
| `shard.handleClose`                 | (`close`: `CloseEvent`) => `Promise`<`void`\>                                                                                                                                | `undefined`                         | -                                                                                                                                                                  |
| `shard.handleMessage`               | (`message`: `MessageEvent`) => `Promise`<`void`\>                                                                                                                            | `undefined`                         | -                                                                                                                                                                  |
| `shard.heart`                       | [`ShardHeart`](discordeno_gateway.ShardHeart.md)                                                                                                                             | `undefined`                         | This contains all the heartbeat information                                                                                                                        |
| `shard.id`                          | `number`                                                                                                                                                                     | `options.id`                        | Id of the shard.                                                                                                                                                   |
| `shard.identify`                    | () => `Promise`<`void`\>                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.isOpen`                      | () => `boolean`                                                                                                                                                              | `undefined`                         | -                                                                                                                                                                  |
| `shard.makePresence`                | `undefined` \| (`shardId`: `number`) => [`BotStatusUpdate`](discordeno_gateway.BotStatusUpdate.md) \| `Promise`<[`BotStatusUpdate`](discordeno_gateway.BotStatusUpdate.md)\> | `options.makePresence`              | Function which can be overwritten in order to get the shards presence.                                                                                             |
| `shard.maxRequestsPerRateLimitTick` | `number`                                                                                                                                                                     | `MAX_GATEWAY_REQUESTS_PER_INTERVAL` | The maximum of requests which can be send to discord per rate limit tick. Typically this value should not be changed.                                              |
| `shard.offlineSendQueue`            | (`_?`: `unknown`) => `void`[]                                                                                                                                                | `undefined`                         | Internal state. Only use this if you know what you are doing. Cache for pending gateway requests which should have been send while the gateway went offline.       |
| `shard.previousSequenceNumber`      | `null` \| `number`                                                                                                                                                           | `undefined`                         | The previous payload sequence number.                                                                                                                              |
| `shard.rateLimitResetInterval`      | `number`                                                                                                                                                                     | `GATEWAY_RATE_LIMIT_RESET_INTERVAL` | In which interval (in milliseconds) the gateway resets it's rate limit.                                                                                            |
| `shard.requestIdentify`             | () => `Promise`<`void`\>                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.resolves`                    | `Map`<`"READY"` \| `"RESUMED"` \| `"INVALID_SESSION"`, (`payload`: [`DiscordGatewayPayload`](discordeno_gateway.DiscordGatewayPayload.md)) => `void`\>                       | `undefined`                         | Internal shard map. Only use this map if you know what you are doing. This is used to resolve internal waiting states. Mapped by SelectedEvents => ResolveFunction |
| `shard.resume`                      | () => `Promise`<`void`\>                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.resumeGatewayUrl`            | `string`                                                                                                                                                                     | `''`                                | -                                                                                                                                                                  |
| `shard.send`                        | (`message`: [`ShardSocketRequest`](discordeno_gateway.ShardSocketRequest.md), `highPriority?`: `boolean`) => `Promise`<`void`\>                                              | `undefined`                         | -                                                                                                                                                                  |
| `shard.sessionId`                   | `undefined` \| `string`                                                                                                                                                      | `undefined`                         | Current session id of the shard if present.                                                                                                                        |
| `shard.shutdown`                    | () => `Promise`<`void`\>                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.socket`                      | `undefined` \| `WebSocket`                                                                                                                                                   | `undefined`                         | This contains the WebSocket connection to Discord, if currently connected.                                                                                         |
| `shard.startHeartbeating`           | (`interval`: `number`) => `void`                                                                                                                                             | `undefined`                         | -                                                                                                                                                                  |
| `shard.state`                       | [`ShardState`](../enums/discordeno_gateway.ShardState.md)                                                                                                                    | `ShardState.Offline`                | Current internal state of the shard.                                                                                                                               |
| `shard.stopHeartbeating`            | () => `void`                                                                                                                                                                 | `undefined`                         | -                                                                                                                                                                  |
| `shard.totalShards`                 | `number`                                                                                                                                                                     | `options.totalShards`               | The total amount of shards which are used to communicate with Discord.                                                                                             |

##### Returns

`Promise`<`void`\>

#### Defined in

[packages/gateway/src/shard/createShard.ts:313](https://github.com/deepsarda/discordeno/blob/c6dc30bb/packages/gateway/src/shard/createShard.ts#L313)

---

### send

• `Optional` **send**: (`shard`: { `bucket`: [`LeakyBucket`](discordeno_gateway.LeakyBucket.md) ; `calculateSafeRequests`: () => `number` ; `close`: (`code`: `number`, `reason`: `string`) => `void` ; `connect`: () => `Promise`<`void`\> ; `events`: [`ShardEvents`](discordeno_gateway.ShardEvents.md) ; `gatewayConfig`: [`ShardGatewayConfig`](discordeno_gateway.ShardGatewayConfig.md) ; `handleClose`: (`close`: `CloseEvent`) => `Promise`<`void`\> ; `handleMessage`: (`message`: `MessageEvent`) => `Promise`<`void`\> ; `heart`: [`ShardHeart`](discordeno_gateway.ShardHeart.md) ; `id`: `number` = options.id; `identify`: () => `Promise`<`void`\> ; `isOpen`: () => `boolean` ; `makePresence`: `undefined` \| (`shardId`: `number`) => [`BotStatusUpdate`](discordeno_gateway.BotStatusUpdate.md) \| `Promise`<[`BotStatusUpdate`](discordeno_gateway.BotStatusUpdate.md)\> = options.makePresence; `maxRequestsPerRateLimitTick`: `number` = MAX_GATEWAY_REQUESTS_PER_INTERVAL; `offlineSendQueue`: (`_?`: `unknown`) => `void`[] ; `previousSequenceNumber`: `null` \| `number` ; `rateLimitResetInterval`: `number` = GATEWAY_RATE_LIMIT_RESET_INTERVAL; `requestIdentify`: () => `Promise`<`void`\> ; `resolves`: `Map`<`"READY"` \| `"RESUMED"` \| `"INVALID_SESSION"`, (`payload`: [`DiscordGatewayPayload`](discordeno_gateway.DiscordGatewayPayload.md)) => `void`\> ; `resume`: () => `Promise`<`void`\> ; `resumeGatewayUrl`: `string` = ''; `send`: (`message`: [`ShardSocketRequest`](discordeno_gateway.ShardSocketRequest.md), `highPriority?`: `boolean`) => `Promise`<`void`\> ; `sessionId`: `undefined` \| `string` ; `shutdown`: () => `Promise`<`void`\> ; `socket`: `undefined` \| `WebSocket` ; `startHeartbeating`: (`interval`: `number`) => `void` ; `state`: [`ShardState`](../enums/discordeno_gateway.ShardState.md) = ShardState.Offline; `stopHeartbeating`: () => `void` ; `totalShards`: `number` = options.totalShards }, `message`: [`ShardSocketRequest`](discordeno_gateway.ShardSocketRequest.md), `highPriority`: `boolean`) => `Promise`<`void`\>

#### Type declaration

▸ (`shard`, `message`, `highPriority`): `Promise`<`void`\>

Send a message to Discord.

##### Parameters

| Name                                | Type                                                                                                                                                                         | Default value                       | Description                                                                                                                                                        |
| :---------------------------------- | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :---------------------------------- | :----------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `shard`                             | `Object`                                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.bucket`                      | [`LeakyBucket`](discordeno_gateway.LeakyBucket.md)                                                                                                                           | `undefined`                         | Internal shard bucket. Only access this if you know what you are doing. Bucket for handling shard request rate limits.                                             |
| `shard.calculateSafeRequests`       | () => `number`                                                                                                                                                               | `undefined`                         | -                                                                                                                                                                  |
| `shard.close`                       | (`code`: `number`, `reason`: `string`) => `void`                                                                                                                             | `undefined`                         | -                                                                                                                                                                  |
| `shard.connect`                     | () => `Promise`<`void`\>                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.events`                      | [`ShardEvents`](discordeno_gateway.ShardEvents.md)                                                                                                                           | `undefined`                         | The shard related event handlers.                                                                                                                                  |
| `shard.gatewayConfig`               | [`ShardGatewayConfig`](discordeno_gateway.ShardGatewayConfig.md)                                                                                                             | `undefined`                         | The gateway configuration which is used to connect to Discord.                                                                                                     |
| `shard.handleClose`                 | (`close`: `CloseEvent`) => `Promise`<`void`\>                                                                                                                                | `undefined`                         | -                                                                                                                                                                  |
| `shard.handleMessage`               | (`message`: `MessageEvent`) => `Promise`<`void`\>                                                                                                                            | `undefined`                         | -                                                                                                                                                                  |
| `shard.heart`                       | [`ShardHeart`](discordeno_gateway.ShardHeart.md)                                                                                                                             | `undefined`                         | This contains all the heartbeat information                                                                                                                        |
| `shard.id`                          | `number`                                                                                                                                                                     | `options.id`                        | Id of the shard.                                                                                                                                                   |
| `shard.identify`                    | () => `Promise`<`void`\>                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.isOpen`                      | () => `boolean`                                                                                                                                                              | `undefined`                         | -                                                                                                                                                                  |
| `shard.makePresence`                | `undefined` \| (`shardId`: `number`) => [`BotStatusUpdate`](discordeno_gateway.BotStatusUpdate.md) \| `Promise`<[`BotStatusUpdate`](discordeno_gateway.BotStatusUpdate.md)\> | `options.makePresence`              | Function which can be overwritten in order to get the shards presence.                                                                                             |
| `shard.maxRequestsPerRateLimitTick` | `number`                                                                                                                                                                     | `MAX_GATEWAY_REQUESTS_PER_INTERVAL` | The maximum of requests which can be send to discord per rate limit tick. Typically this value should not be changed.                                              |
| `shard.offlineSendQueue`            | (`_?`: `unknown`) => `void`[]                                                                                                                                                | `undefined`                         | Internal state. Only use this if you know what you are doing. Cache for pending gateway requests which should have been send while the gateway went offline.       |
| `shard.previousSequenceNumber`      | `null` \| `number`                                                                                                                                                           | `undefined`                         | The previous payload sequence number.                                                                                                                              |
| `shard.rateLimitResetInterval`      | `number`                                                                                                                                                                     | `GATEWAY_RATE_LIMIT_RESET_INTERVAL` | In which interval (in milliseconds) the gateway resets it's rate limit.                                                                                            |
| `shard.requestIdentify`             | () => `Promise`<`void`\>                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.resolves`                    | `Map`<`"READY"` \| `"RESUMED"` \| `"INVALID_SESSION"`, (`payload`: [`DiscordGatewayPayload`](discordeno_gateway.DiscordGatewayPayload.md)) => `void`\>                       | `undefined`                         | Internal shard map. Only use this map if you know what you are doing. This is used to resolve internal waiting states. Mapped by SelectedEvents => ResolveFunction |
| `shard.resume`                      | () => `Promise`<`void`\>                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.resumeGatewayUrl`            | `string`                                                                                                                                                                     | `''`                                | -                                                                                                                                                                  |
| `shard.send`                        | (`message`: [`ShardSocketRequest`](discordeno_gateway.ShardSocketRequest.md), `highPriority?`: `boolean`) => `Promise`<`void`\>                                              | `undefined`                         | -                                                                                                                                                                  |
| `shard.sessionId`                   | `undefined` \| `string`                                                                                                                                                      | `undefined`                         | Current session id of the shard if present.                                                                                                                        |
| `shard.shutdown`                    | () => `Promise`<`void`\>                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.socket`                      | `undefined` \| `WebSocket`                                                                                                                                                   | `undefined`                         | This contains the WebSocket connection to Discord, if currently connected.                                                                                         |
| `shard.startHeartbeating`           | (`interval`: `number`) => `void`                                                                                                                                             | `undefined`                         | -                                                                                                                                                                  |
| `shard.state`                       | [`ShardState`](../enums/discordeno_gateway.ShardState.md)                                                                                                                    | `ShardState.Offline`                | Current internal state of the shard.                                                                                                                               |
| `shard.stopHeartbeating`            | () => `void`                                                                                                                                                                 | `undefined`                         | -                                                                                                                                                                  |
| `shard.totalShards`                 | `number`                                                                                                                                                                     | `options.totalShards`               | The total amount of shards which are used to communicate with Discord.                                                                                             |
| `message`                           | [`ShardSocketRequest`](discordeno_gateway.ShardSocketRequest.md)                                                                                                             | `undefined`                         | -                                                                                                                                                                  |
| `highPriority`                      | `boolean`                                                                                                                                                                    | `undefined`                         | Whether this message should be send asap.                                                                                                                          |

##### Returns

`Promise`<`void`\>

#### Defined in

[packages/gateway/src/shard/createShard.ts:318](https://github.com/deepsarda/discordeno/blob/c6dc30bb/packages/gateway/src/shard/createShard.ts#L318)

---

### shutdown

• `Optional` **shutdown**: (`shard`: { `bucket`: [`LeakyBucket`](discordeno_gateway.LeakyBucket.md) ; `calculateSafeRequests`: () => `number` ; `close`: (`code`: `number`, `reason`: `string`) => `void` ; `connect`: () => `Promise`<`void`\> ; `events`: [`ShardEvents`](discordeno_gateway.ShardEvents.md) ; `gatewayConfig`: [`ShardGatewayConfig`](discordeno_gateway.ShardGatewayConfig.md) ; `handleClose`: (`close`: `CloseEvent`) => `Promise`<`void`\> ; `handleMessage`: (`message`: `MessageEvent`) => `Promise`<`void`\> ; `heart`: [`ShardHeart`](discordeno_gateway.ShardHeart.md) ; `id`: `number` = options.id; `identify`: () => `Promise`<`void`\> ; `isOpen`: () => `boolean` ; `makePresence`: `undefined` \| (`shardId`: `number`) => [`BotStatusUpdate`](discordeno_gateway.BotStatusUpdate.md) \| `Promise`<[`BotStatusUpdate`](discordeno_gateway.BotStatusUpdate.md)\> = options.makePresence; `maxRequestsPerRateLimitTick`: `number` = MAX_GATEWAY_REQUESTS_PER_INTERVAL; `offlineSendQueue`: (`_?`: `unknown`) => `void`[] ; `previousSequenceNumber`: `null` \| `number` ; `rateLimitResetInterval`: `number` = GATEWAY_RATE_LIMIT_RESET_INTERVAL; `requestIdentify`: () => `Promise`<`void`\> ; `resolves`: `Map`<`"READY"` \| `"RESUMED"` \| `"INVALID_SESSION"`, (`payload`: [`DiscordGatewayPayload`](discordeno_gateway.DiscordGatewayPayload.md)) => `void`\> ; `resume`: () => `Promise`<`void`\> ; `resumeGatewayUrl`: `string` = ''; `send`: (`message`: [`ShardSocketRequest`](discordeno_gateway.ShardSocketRequest.md), `highPriority?`: `boolean`) => `Promise`<`void`\> ; `sessionId`: `undefined` \| `string` ; `shutdown`: () => `Promise`<`void`\> ; `socket`: `undefined` \| `WebSocket` ; `startHeartbeating`: (`interval`: `number`) => `void` ; `state`: [`ShardState`](../enums/discordeno_gateway.ShardState.md) = ShardState.Offline; `stopHeartbeating`: () => `void` ; `totalShards`: `number` = options.totalShards }) => `Promise`<`void`\>

#### Type declaration

▸ (`shard`): `Promise`<`void`\>

Shutdown the shard.
Forcefully disconnect the shard from Discord.
The shard may not attempt to reconnect with Discord.

##### Parameters

| Name                                | Type                                                                                                                                                                         | Default value                       | Description                                                                                                                                                        |
| :---------------------------------- | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :---------------------------------- | :----------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `shard`                             | `Object`                                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.bucket`                      | [`LeakyBucket`](discordeno_gateway.LeakyBucket.md)                                                                                                                           | `undefined`                         | Internal shard bucket. Only access this if you know what you are doing. Bucket for handling shard request rate limits.                                             |
| `shard.calculateSafeRequests`       | () => `number`                                                                                                                                                               | `undefined`                         | -                                                                                                                                                                  |
| `shard.close`                       | (`code`: `number`, `reason`: `string`) => `void`                                                                                                                             | `undefined`                         | -                                                                                                                                                                  |
| `shard.connect`                     | () => `Promise`<`void`\>                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.events`                      | [`ShardEvents`](discordeno_gateway.ShardEvents.md)                                                                                                                           | `undefined`                         | The shard related event handlers.                                                                                                                                  |
| `shard.gatewayConfig`               | [`ShardGatewayConfig`](discordeno_gateway.ShardGatewayConfig.md)                                                                                                             | `undefined`                         | The gateway configuration which is used to connect to Discord.                                                                                                     |
| `shard.handleClose`                 | (`close`: `CloseEvent`) => `Promise`<`void`\>                                                                                                                                | `undefined`                         | -                                                                                                                                                                  |
| `shard.handleMessage`               | (`message`: `MessageEvent`) => `Promise`<`void`\>                                                                                                                            | `undefined`                         | -                                                                                                                                                                  |
| `shard.heart`                       | [`ShardHeart`](discordeno_gateway.ShardHeart.md)                                                                                                                             | `undefined`                         | This contains all the heartbeat information                                                                                                                        |
| `shard.id`                          | `number`                                                                                                                                                                     | `options.id`                        | Id of the shard.                                                                                                                                                   |
| `shard.identify`                    | () => `Promise`<`void`\>                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.isOpen`                      | () => `boolean`                                                                                                                                                              | `undefined`                         | -                                                                                                                                                                  |
| `shard.makePresence`                | `undefined` \| (`shardId`: `number`) => [`BotStatusUpdate`](discordeno_gateway.BotStatusUpdate.md) \| `Promise`<[`BotStatusUpdate`](discordeno_gateway.BotStatusUpdate.md)\> | `options.makePresence`              | Function which can be overwritten in order to get the shards presence.                                                                                             |
| `shard.maxRequestsPerRateLimitTick` | `number`                                                                                                                                                                     | `MAX_GATEWAY_REQUESTS_PER_INTERVAL` | The maximum of requests which can be send to discord per rate limit tick. Typically this value should not be changed.                                              |
| `shard.offlineSendQueue`            | (`_?`: `unknown`) => `void`[]                                                                                                                                                | `undefined`                         | Internal state. Only use this if you know what you are doing. Cache for pending gateway requests which should have been send while the gateway went offline.       |
| `shard.previousSequenceNumber`      | `null` \| `number`                                                                                                                                                           | `undefined`                         | The previous payload sequence number.                                                                                                                              |
| `shard.rateLimitResetInterval`      | `number`                                                                                                                                                                     | `GATEWAY_RATE_LIMIT_RESET_INTERVAL` | In which interval (in milliseconds) the gateway resets it's rate limit.                                                                                            |
| `shard.requestIdentify`             | () => `Promise`<`void`\>                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.resolves`                    | `Map`<`"READY"` \| `"RESUMED"` \| `"INVALID_SESSION"`, (`payload`: [`DiscordGatewayPayload`](discordeno_gateway.DiscordGatewayPayload.md)) => `void`\>                       | `undefined`                         | Internal shard map. Only use this map if you know what you are doing. This is used to resolve internal waiting states. Mapped by SelectedEvents => ResolveFunction |
| `shard.resume`                      | () => `Promise`<`void`\>                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.resumeGatewayUrl`            | `string`                                                                                                                                                                     | `''`                                | -                                                                                                                                                                  |
| `shard.send`                        | (`message`: [`ShardSocketRequest`](discordeno_gateway.ShardSocketRequest.md), `highPriority?`: `boolean`) => `Promise`<`void`\>                                              | `undefined`                         | -                                                                                                                                                                  |
| `shard.sessionId`                   | `undefined` \| `string`                                                                                                                                                      | `undefined`                         | Current session id of the shard if present.                                                                                                                        |
| `shard.shutdown`                    | () => `Promise`<`void`\>                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.socket`                      | `undefined` \| `WebSocket`                                                                                                                                                   | `undefined`                         | This contains the WebSocket connection to Discord, if currently connected.                                                                                         |
| `shard.startHeartbeating`           | (`interval`: `number`) => `void`                                                                                                                                             | `undefined`                         | -                                                                                                                                                                  |
| `shard.state`                       | [`ShardState`](../enums/discordeno_gateway.ShardState.md)                                                                                                                    | `ShardState.Offline`                | Current internal state of the shard.                                                                                                                               |
| `shard.stopHeartbeating`            | () => `void`                                                                                                                                                                 | `undefined`                         | -                                                                                                                                                                  |
| `shard.totalShards`                 | `number`                                                                                                                                                                     | `options.totalShards`               | The total amount of shards which are used to communicate with Discord.                                                                                             |

##### Returns

`Promise`<`void`\>

#### Defined in

[packages/gateway/src/shard/createShard.ts:324](https://github.com/deepsarda/discordeno/blob/c6dc30bb/packages/gateway/src/shard/createShard.ts#L324)

---

### startHeartbeating

• `Optional` `Private` **startHeartbeating**: (`shard`: { `bucket`: [`LeakyBucket`](discordeno_gateway.LeakyBucket.md) ; `calculateSafeRequests`: () => `number` ; `close`: (`code`: `number`, `reason`: `string`) => `void` ; `connect`: () => `Promise`<`void`\> ; `events`: [`ShardEvents`](discordeno_gateway.ShardEvents.md) ; `gatewayConfig`: [`ShardGatewayConfig`](discordeno_gateway.ShardGatewayConfig.md) ; `handleClose`: (`close`: `CloseEvent`) => `Promise`<`void`\> ; `handleMessage`: (`message`: `MessageEvent`) => `Promise`<`void`\> ; `heart`: [`ShardHeart`](discordeno_gateway.ShardHeart.md) ; `id`: `number` = options.id; `identify`: () => `Promise`<`void`\> ; `isOpen`: () => `boolean` ; `makePresence`: `undefined` \| (`shardId`: `number`) => [`BotStatusUpdate`](discordeno_gateway.BotStatusUpdate.md) \| `Promise`<[`BotStatusUpdate`](discordeno_gateway.BotStatusUpdate.md)\> = options.makePresence; `maxRequestsPerRateLimitTick`: `number` = MAX_GATEWAY_REQUESTS_PER_INTERVAL; `offlineSendQueue`: (`_?`: `unknown`) => `void`[] ; `previousSequenceNumber`: `null` \| `number` ; `rateLimitResetInterval`: `number` = GATEWAY_RATE_LIMIT_RESET_INTERVAL; `requestIdentify`: () => `Promise`<`void`\> ; `resolves`: `Map`<`"READY"` \| `"RESUMED"` \| `"INVALID_SESSION"`, (`payload`: [`DiscordGatewayPayload`](discordeno_gateway.DiscordGatewayPayload.md)) => `void`\> ; `resume`: () => `Promise`<`void`\> ; `resumeGatewayUrl`: `string` = ''; `send`: (`message`: [`ShardSocketRequest`](discordeno_gateway.ShardSocketRequest.md), `highPriority?`: `boolean`) => `Promise`<`void`\> ; `sessionId`: `undefined` \| `string` ; `shutdown`: () => `Promise`<`void`\> ; `socket`: `undefined` \| `WebSocket` ; `startHeartbeating`: (`interval`: `number`) => `void` ; `state`: [`ShardState`](../enums/discordeno_gateway.ShardState.md) = ShardState.Offline; `stopHeartbeating`: () => `void` ; `totalShards`: `number` = options.totalShards }, `interval`: `number`) => `void`

#### Type declaration

▸ (`shard`, `interval`): `void`

Internal shard function.
Only use this function if you know what you are doing.

Start sending heartbeat payloads to Discord in the provided interval.

##### Parameters

| Name                                | Type                                                                                                                                                                         | Default value                       | Description                                                                                                                                                        |
| :---------------------------------- | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :---------------------------------- | :----------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `shard`                             | `Object`                                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.bucket`                      | [`LeakyBucket`](discordeno_gateway.LeakyBucket.md)                                                                                                                           | `undefined`                         | Internal shard bucket. Only access this if you know what you are doing. Bucket for handling shard request rate limits.                                             |
| `shard.calculateSafeRequests`       | () => `number`                                                                                                                                                               | `undefined`                         | -                                                                                                                                                                  |
| `shard.close`                       | (`code`: `number`, `reason`: `string`) => `void`                                                                                                                             | `undefined`                         | -                                                                                                                                                                  |
| `shard.connect`                     | () => `Promise`<`void`\>                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.events`                      | [`ShardEvents`](discordeno_gateway.ShardEvents.md)                                                                                                                           | `undefined`                         | The shard related event handlers.                                                                                                                                  |
| `shard.gatewayConfig`               | [`ShardGatewayConfig`](discordeno_gateway.ShardGatewayConfig.md)                                                                                                             | `undefined`                         | The gateway configuration which is used to connect to Discord.                                                                                                     |
| `shard.handleClose`                 | (`close`: `CloseEvent`) => `Promise`<`void`\>                                                                                                                                | `undefined`                         | -                                                                                                                                                                  |
| `shard.handleMessage`               | (`message`: `MessageEvent`) => `Promise`<`void`\>                                                                                                                            | `undefined`                         | -                                                                                                                                                                  |
| `shard.heart`                       | [`ShardHeart`](discordeno_gateway.ShardHeart.md)                                                                                                                             | `undefined`                         | This contains all the heartbeat information                                                                                                                        |
| `shard.id`                          | `number`                                                                                                                                                                     | `options.id`                        | Id of the shard.                                                                                                                                                   |
| `shard.identify`                    | () => `Promise`<`void`\>                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.isOpen`                      | () => `boolean`                                                                                                                                                              | `undefined`                         | -                                                                                                                                                                  |
| `shard.makePresence`                | `undefined` \| (`shardId`: `number`) => [`BotStatusUpdate`](discordeno_gateway.BotStatusUpdate.md) \| `Promise`<[`BotStatusUpdate`](discordeno_gateway.BotStatusUpdate.md)\> | `options.makePresence`              | Function which can be overwritten in order to get the shards presence.                                                                                             |
| `shard.maxRequestsPerRateLimitTick` | `number`                                                                                                                                                                     | `MAX_GATEWAY_REQUESTS_PER_INTERVAL` | The maximum of requests which can be send to discord per rate limit tick. Typically this value should not be changed.                                              |
| `shard.offlineSendQueue`            | (`_?`: `unknown`) => `void`[]                                                                                                                                                | `undefined`                         | Internal state. Only use this if you know what you are doing. Cache for pending gateway requests which should have been send while the gateway went offline.       |
| `shard.previousSequenceNumber`      | `null` \| `number`                                                                                                                                                           | `undefined`                         | The previous payload sequence number.                                                                                                                              |
| `shard.rateLimitResetInterval`      | `number`                                                                                                                                                                     | `GATEWAY_RATE_LIMIT_RESET_INTERVAL` | In which interval (in milliseconds) the gateway resets it's rate limit.                                                                                            |
| `shard.requestIdentify`             | () => `Promise`<`void`\>                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.resolves`                    | `Map`<`"READY"` \| `"RESUMED"` \| `"INVALID_SESSION"`, (`payload`: [`DiscordGatewayPayload`](discordeno_gateway.DiscordGatewayPayload.md)) => `void`\>                       | `undefined`                         | Internal shard map. Only use this map if you know what you are doing. This is used to resolve internal waiting states. Mapped by SelectedEvents => ResolveFunction |
| `shard.resume`                      | () => `Promise`<`void`\>                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.resumeGatewayUrl`            | `string`                                                                                                                                                                     | `''`                                | -                                                                                                                                                                  |
| `shard.send`                        | (`message`: [`ShardSocketRequest`](discordeno_gateway.ShardSocketRequest.md), `highPriority?`: `boolean`) => `Promise`<`void`\>                                              | `undefined`                         | -                                                                                                                                                                  |
| `shard.sessionId`                   | `undefined` \| `string`                                                                                                                                                      | `undefined`                         | Current session id of the shard if present.                                                                                                                        |
| `shard.shutdown`                    | () => `Promise`<`void`\>                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.socket`                      | `undefined` \| `WebSocket`                                                                                                                                                   | `undefined`                         | This contains the WebSocket connection to Discord, if currently connected.                                                                                         |
| `shard.startHeartbeating`           | (`interval`: `number`) => `void`                                                                                                                                             | `undefined`                         | -                                                                                                                                                                  |
| `shard.state`                       | [`ShardState`](../enums/discordeno_gateway.ShardState.md)                                                                                                                    | `ShardState.Offline`                | Current internal state of the shard.                                                                                                                               |
| `shard.stopHeartbeating`            | () => `void`                                                                                                                                                                 | `undefined`                         | -                                                                                                                                                                  |
| `shard.totalShards`                 | `number`                                                                                                                                                                     | `options.totalShards`               | The total amount of shards which are used to communicate with Discord.                                                                                             |
| `interval`                          | `number`                                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |

##### Returns

`void`

#### Defined in

[packages/gateway/src/shard/createShard.ts:331](https://github.com/deepsarda/discordeno/blob/c6dc30bb/packages/gateway/src/shard/createShard.ts#L331)

---

### state

• `Optional` **state**: [`ShardState`](../enums/discordeno_gateway.ShardState.md)

Current internal state of the shard.

#### Defined in

[packages/gateway/src/shard/createShard.ts:334](https://github.com/deepsarda/discordeno/blob/c6dc30bb/packages/gateway/src/shard/createShard.ts#L334)

---

### stopHeartbeating

• `Optional` `Private` **stopHeartbeating**: (`shard`: { `bucket`: [`LeakyBucket`](discordeno_gateway.LeakyBucket.md) ; `calculateSafeRequests`: () => `number` ; `close`: (`code`: `number`, `reason`: `string`) => `void` ; `connect`: () => `Promise`<`void`\> ; `events`: [`ShardEvents`](discordeno_gateway.ShardEvents.md) ; `gatewayConfig`: [`ShardGatewayConfig`](discordeno_gateway.ShardGatewayConfig.md) ; `handleClose`: (`close`: `CloseEvent`) => `Promise`<`void`\> ; `handleMessage`: (`message`: `MessageEvent`) => `Promise`<`void`\> ; `heart`: [`ShardHeart`](discordeno_gateway.ShardHeart.md) ; `id`: `number` = options.id; `identify`: () => `Promise`<`void`\> ; `isOpen`: () => `boolean` ; `makePresence`: `undefined` \| (`shardId`: `number`) => [`BotStatusUpdate`](discordeno_gateway.BotStatusUpdate.md) \| `Promise`<[`BotStatusUpdate`](discordeno_gateway.BotStatusUpdate.md)\> = options.makePresence; `maxRequestsPerRateLimitTick`: `number` = MAX_GATEWAY_REQUESTS_PER_INTERVAL; `offlineSendQueue`: (`_?`: `unknown`) => `void`[] ; `previousSequenceNumber`: `null` \| `number` ; `rateLimitResetInterval`: `number` = GATEWAY_RATE_LIMIT_RESET_INTERVAL; `requestIdentify`: () => `Promise`<`void`\> ; `resolves`: `Map`<`"READY"` \| `"RESUMED"` \| `"INVALID_SESSION"`, (`payload`: [`DiscordGatewayPayload`](discordeno_gateway.DiscordGatewayPayload.md)) => `void`\> ; `resume`: () => `Promise`<`void`\> ; `resumeGatewayUrl`: `string` = ''; `send`: (`message`: [`ShardSocketRequest`](discordeno_gateway.ShardSocketRequest.md), `highPriority?`: `boolean`) => `Promise`<`void`\> ; `sessionId`: `undefined` \| `string` ; `shutdown`: () => `Promise`<`void`\> ; `socket`: `undefined` \| `WebSocket` ; `startHeartbeating`: (`interval`: `number`) => `void` ; `state`: [`ShardState`](../enums/discordeno_gateway.ShardState.md) = ShardState.Offline; `stopHeartbeating`: () => `void` ; `totalShards`: `number` = options.totalShards }) => `void`

#### Type declaration

▸ (`shard`): `void`

Internal shard function.
Only use this function if you know what you are doing.

Stop the heartbeating process with discord.

##### Parameters

| Name                                | Type                                                                                                                                                                         | Default value                       | Description                                                                                                                                                        |
| :---------------------------------- | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :---------------------------------- | :----------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `shard`                             | `Object`                                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.bucket`                      | [`LeakyBucket`](discordeno_gateway.LeakyBucket.md)                                                                                                                           | `undefined`                         | Internal shard bucket. Only access this if you know what you are doing. Bucket for handling shard request rate limits.                                             |
| `shard.calculateSafeRequests`       | () => `number`                                                                                                                                                               | `undefined`                         | -                                                                                                                                                                  |
| `shard.close`                       | (`code`: `number`, `reason`: `string`) => `void`                                                                                                                             | `undefined`                         | -                                                                                                                                                                  |
| `shard.connect`                     | () => `Promise`<`void`\>                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.events`                      | [`ShardEvents`](discordeno_gateway.ShardEvents.md)                                                                                                                           | `undefined`                         | The shard related event handlers.                                                                                                                                  |
| `shard.gatewayConfig`               | [`ShardGatewayConfig`](discordeno_gateway.ShardGatewayConfig.md)                                                                                                             | `undefined`                         | The gateway configuration which is used to connect to Discord.                                                                                                     |
| `shard.handleClose`                 | (`close`: `CloseEvent`) => `Promise`<`void`\>                                                                                                                                | `undefined`                         | -                                                                                                                                                                  |
| `shard.handleMessage`               | (`message`: `MessageEvent`) => `Promise`<`void`\>                                                                                                                            | `undefined`                         | -                                                                                                                                                                  |
| `shard.heart`                       | [`ShardHeart`](discordeno_gateway.ShardHeart.md)                                                                                                                             | `undefined`                         | This contains all the heartbeat information                                                                                                                        |
| `shard.id`                          | `number`                                                                                                                                                                     | `options.id`                        | Id of the shard.                                                                                                                                                   |
| `shard.identify`                    | () => `Promise`<`void`\>                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.isOpen`                      | () => `boolean`                                                                                                                                                              | `undefined`                         | -                                                                                                                                                                  |
| `shard.makePresence`                | `undefined` \| (`shardId`: `number`) => [`BotStatusUpdate`](discordeno_gateway.BotStatusUpdate.md) \| `Promise`<[`BotStatusUpdate`](discordeno_gateway.BotStatusUpdate.md)\> | `options.makePresence`              | Function which can be overwritten in order to get the shards presence.                                                                                             |
| `shard.maxRequestsPerRateLimitTick` | `number`                                                                                                                                                                     | `MAX_GATEWAY_REQUESTS_PER_INTERVAL` | The maximum of requests which can be send to discord per rate limit tick. Typically this value should not be changed.                                              |
| `shard.offlineSendQueue`            | (`_?`: `unknown`) => `void`[]                                                                                                                                                | `undefined`                         | Internal state. Only use this if you know what you are doing. Cache for pending gateway requests which should have been send while the gateway went offline.       |
| `shard.previousSequenceNumber`      | `null` \| `number`                                                                                                                                                           | `undefined`                         | The previous payload sequence number.                                                                                                                              |
| `shard.rateLimitResetInterval`      | `number`                                                                                                                                                                     | `GATEWAY_RATE_LIMIT_RESET_INTERVAL` | In which interval (in milliseconds) the gateway resets it's rate limit.                                                                                            |
| `shard.requestIdentify`             | () => `Promise`<`void`\>                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.resolves`                    | `Map`<`"READY"` \| `"RESUMED"` \| `"INVALID_SESSION"`, (`payload`: [`DiscordGatewayPayload`](discordeno_gateway.DiscordGatewayPayload.md)) => `void`\>                       | `undefined`                         | Internal shard map. Only use this map if you know what you are doing. This is used to resolve internal waiting states. Mapped by SelectedEvents => ResolveFunction |
| `shard.resume`                      | () => `Promise`<`void`\>                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.resumeGatewayUrl`            | `string`                                                                                                                                                                     | `''`                                | -                                                                                                                                                                  |
| `shard.send`                        | (`message`: [`ShardSocketRequest`](discordeno_gateway.ShardSocketRequest.md), `highPriority?`: `boolean`) => `Promise`<`void`\>                                              | `undefined`                         | -                                                                                                                                                                  |
| `shard.sessionId`                   | `undefined` \| `string`                                                                                                                                                      | `undefined`                         | Current session id of the shard if present.                                                                                                                        |
| `shard.shutdown`                    | () => `Promise`<`void`\>                                                                                                                                                     | `undefined`                         | -                                                                                                                                                                  |
| `shard.socket`                      | `undefined` \| `WebSocket`                                                                                                                                                   | `undefined`                         | This contains the WebSocket connection to Discord, if currently connected.                                                                                         |
| `shard.startHeartbeating`           | (`interval`: `number`) => `void`                                                                                                                                             | `undefined`                         | -                                                                                                                                                                  |
| `shard.state`                       | [`ShardState`](../enums/discordeno_gateway.ShardState.md)                                                                                                                    | `ShardState.Offline`                | Current internal state of the shard.                                                                                                                               |
| `shard.stopHeartbeating`            | () => `void`                                                                                                                                                                 | `undefined`                         | -                                                                                                                                                                  |
| `shard.totalShards`                 | `number`                                                                                                                                                                     | `options.totalShards`               | The total amount of shards which are used to communicate with Discord.                                                                                             |

##### Returns

`void`

#### Defined in

[packages/gateway/src/shard/createShard.ts:341](https://github.com/deepsarda/discordeno/blob/c6dc30bb/packages/gateway/src/shard/createShard.ts#L341)

---

### totalShards

• **totalShards**: `number`

The total amount of shards which are used to communicate with Discord.

#### Defined in

[packages/gateway/src/shard/createShard.ts:256](https://github.com/deepsarda/discordeno/blob/c6dc30bb/packages/gateway/src/shard/createShard.ts#L256)
